<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>MingYuan&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="æ˜è¿œåšå®¢ MingYuan&#39;s Blog">
<meta property="og:type" content="website">
<meta property="og:title" content="MingYuan&#39;s Blog">
<meta property="og:url" content="https://acmu.github.io/page/2/index.html">
<meta property="og:site_name" content="MingYuan&#39;s Blog">
<meta property="og:description" content="æ˜è¿œåšå®¢ MingYuan&#39;s Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="MingYuan">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/my-blog/atom.xml" title="MingYuan's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/my-blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/my-blog/css/style.css">

  
    
<link rel="stylesheet" href="/my-blog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.1.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/my-blog/" id="logo">MingYuan&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/my-blog/" id="subtitle">æ˜è¿œåšå®¢</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/my-blog/">Home</a>
        
          <a class="main-nav-link" href="/my-blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/my-blog/atom.xml" title="RSS è®¢é˜…"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœç´¢"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="æœç´¢"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://acmu.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-browser/chrome-96" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/my-blog/2021/12/28/browser/chrome-96/" class="article-date">
  <time class="dt-published" datetime="2021-12-28T15:20:18.000Z" itemprop="datePublished">2021-12-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/my-blog/2021/12/28/browser/chrome-96/">Chrome 96 æ›´æ–°</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>è®°å½•ä¸€äº›æœ‰è¶£æœ‰ç”¨çš„å¸¸ç”¨çŸ¥è¯†</p>
<p>é¢˜å¤–è¯ï¼šChrome ä¹Ÿæ˜¯æœ‰ bug çš„ï¼Œå¹¶ä¸”å°±åœ¨æˆ‘ä»¬èº«è¾¹ï¼Œå¦‚æœä»”ç»†ä½¿ç”¨ï¼Œè¿˜æ˜¯èƒ½å‘ç°çš„</p>
<h3 id="Chrome-96"><a href="#Chrome-96" class="headerlink" title="Chrome 96"></a><a target="_blank" rel="noopener" href="https://developer.chrome.com/zh/blog/new-in-devtools-96/#css-overview">Chrome 96</a></h3><p>æ–°å¢äº† css æ¦‚è§ˆé¢æ¿ï¼Œæ–¹ä¾¿ä¼˜åŒ– css</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/28_15:09_jSSa3y.png" alt="CSS æ¦‚è§ˆé¢æ¿"></p>
<p>æŸ¥çœ‹ dom å…ƒç´ çš„å±æ€§æ—¶ï¼Œè®¾ç½®è¿‡çš„ä¼šé¦–å…ˆåŠ ç²—å±•ç¤ºï¼Œè¿™æ ·æ–¹ä¾¿è°ƒè¯•</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/28_15:09_hDRtBX.png" alt="è‡ªæœ‰å±æ€§åŠ ç²—å¹¶ä¼˜å…ˆæ’åº"></p>
<p>æœ‰ payload é¢æ¿ï¼Œæ›´æ–¹ä¾¿çš„çœ‹è¯·æ±‚å‚æ•°</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/28_15:09_aq4oAR.png" alt="ç½‘ç»œé¢æ¿é‡Œé¢çš„ payload è¾¹æ "></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://acmu.github.io/2021/12/28/browser/chrome-96/" data-id="cl1ztfbrr0008amoohtz650xj" data-title="Chrome 96 æ›´æ–°" class="article-share-link">åˆ†äº«</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/my-blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">æµè§ˆå™¨</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-weekly/02" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/my-blog/2021/12/27/weekly/02/" class="article-date">
  <time class="dt-published" datetime="2021-12-27T15:16:26.000Z" itemprop="datePublished">2021-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/my-blog/2021/12/27/weekly/02/">æ˜è¿œå‘¨åˆŠï¼ˆç¬¬ 2 æœŸï¼‰ğŸ¤©</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>æ•´ç†æ±‡æ€»ä¸€å‘¨çœ‹åˆ°çš„æ–‡ç« ä¸å­¦åˆ°çš„çŸ¥è¯†ï¼ˆ2021-12-17 ~ 2021-12-23ï¼‰</p>
<h2 id="æ–‡ç« "><a href="#æ–‡ç« " class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h2><h3 id="é¢è¯•å®˜é—®ï¼šJS-çš„ç»§æ‰¿"><a href="#é¢è¯•å®˜é—®ï¼šJS-çš„ç»§æ‰¿" class="headerlink" title="é¢è¯•å®˜é—®ï¼šJS çš„ç»§æ‰¿"></a><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903780035592205">é¢è¯•å®˜é—®ï¼šJS çš„ç»§æ‰¿</a></h3><h4 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"><span class="comment">// å®ä¾‹</span></span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯ä¸€ä¸ªå‡½æ•°éƒ½æœ‰ prototype å±æ€§ï¼Œåªæœ‰åœ¨ new + æ„é€ å‡½æ•°çš„æ—¶å€™ï¼Œprototype å±æ€§æ‰æœ‰ç”¨ï¼Œæ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼Œä¸ä¼šç”¨åˆ° prototype å±æ€§</span></span><br><span class="line"><span class="comment">// æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ __proto__ å±æ€§ï¼Œ__proto__ å±æ€§æŒ‡å‘å½“å‰å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼Œjsæ˜¯åŸºäºåŸå‹æ¥å®ç°ç»§æ‰¿</span></span><br><span class="line"><span class="comment">// å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼ˆæ•°ç»„ã€æ­£åˆ™éƒ½æ˜¯å¯¹è±¡ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨äºæ–¹ä¾¿çš„æ‰¾åˆ°æ„é€ å‡½æ•°</span></span><br><span class="line">F.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === F; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ®µä»£ç æ˜¯jsèƒ½å®ç°ç»§æ‰¿çš„å…³é”®</span></span><br><span class="line">F.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Function æ˜¯ Object çš„å®ä¾‹ï¼ˆFunction å’Œ Object éƒ½æ˜¯å‡½æ•°ï¼‰</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"><span class="comment">// Object çš„åŸå‹æ˜¯ nullï¼ˆè§„å®šï¼‰</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="literal">null</span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// f æ˜¯ F çš„å®ä¾‹ï¼Œè¿™å°±ä»£è¡¨ f ç»§æ‰¿ä¸ F</span></span><br><span class="line">f.<span class="property">__proto__</span> === F.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"><span class="comment">// F æ˜¯å®ä¾‹aï¼ŒFunction æ˜¯å®ä¾‹bï¼Œå®ä¾‹aå’Œbçš„åŸå‹éƒ½æ˜¯ Object.prototype</span></span><br><span class="line">F.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ª es6 çš„ä¾‹å­</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ES6</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Parent</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">sayHello</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sayName</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;my name is &#x27;</span> + <span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Child</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Parent</span> &#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">        <span class="variable language_">super</span>(name);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">sayAge</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;my age is &#x27;</span> + <span class="variable language_">this</span>.<span class="property">age</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">age</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> parent = <span class="keyword">new</span> <span class="title class_">Parent</span>(<span class="string">&#x27;Parent&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> child = <span class="keyword">new</span> <span class="title class_">Child</span>(<span class="string">&#x27;Child&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;parent: &#x27;</span>, parent); <span class="comment">// parent:  ParentÂ &#123;name: &quot;Parent&quot;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Parent</span>.<span class="title function_">sayHello</span>(); <span class="comment">// hello</span></span><br><span class="line">parent.<span class="title function_">sayName</span>(); <span class="comment">// my name is Parent</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;child: &#x27;</span>, child); <span class="comment">// child:  ChildÂ &#123;name: &quot;Child&quot;, age: 18&#125;</span></span><br><span class="line"><span class="title class_">Child</span>.<span class="title function_">sayHello</span>(); <span class="comment">// hello</span></span><br><span class="line">child.<span class="title function_">sayName</span>(); <span class="comment">// my name is Child</span></span><br><span class="line">child.<span class="title function_">sayAge</span>(); <span class="comment">// my age is 18</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Child</span>.<span class="property">__proto__</span> === <span class="title class_">Parent</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1ã€æ„é€ å™¨åŸå‹é“¾</span></span><br><span class="line"><span class="title class_">Child</span>.<span class="property">__proto__</span> === <span class="title class_">Parent</span>; <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Parent</span>.<span class="property">__proto__</span> === <span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="literal">null</span>; <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 2ã€å®ä¾‹åŸå‹é“¾</span></span><br><span class="line">child.<span class="property">__proto__</span> === <span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Parent</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>; <span class="comment">// true</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="literal">null</span>; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å­ç±»ä¸­ä½¿ç”¨çš„ superï¼Œç›¸å½“äº es5 ä¸­ä½¿ç”¨çš„ call apply</span></span><br></pre></td></tr></table></figure>

<p><code>Child.__proto__ === Parent</code> è¿™ä¸¤ä¸ªå±…ç„¶ç›¸ç­‰ï¼Œä¸å¤ªæ‡‚ï¼Ÿè¿™æ˜¯ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡-ç¬¬ 3 ç‰ˆã€‹ ç« èŠ‚ 6.3 ç»§æ‰¿ ä¸­çš„ å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</p>
<p><code>__proto__</code> åªæ˜¯ä¸€ä¸ªæ–¹ä¾¿æˆ‘ä»¬æµ‹è¯•çš„å±æ€§ï¼Œåœ¨æ­£å¼é¡¹ç›®ä¸­ï¼Œä¸è¦ä½¿ç”¨å®ƒï¼Œé‚£ä¹ˆæ”¹æ€ä¹ˆæ›´æ”¹ <code>__proto__</code> çš„å€¼å‘¢ï¼Ÿåº”è¯¥ä½¿ç”¨ <code>new</code>ã€<code>Object.create</code>å’Œ<code>Object.setPrototypeOf</code></p>
<p><code>new</code> ï¼š</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå¯¹è±¡ a</li>
<li>å¯¹è±¡ a çš„ <code>__proto__</code> èµ‹å€¼ä¸ºæ„é€ å‡½æ•°çš„ prototype ï¼ˆåœ¨æµè§ˆå™¨ä¸­<code>[[Prototype]]</code> å°±æ˜¯ <code>__proto__</code>ï¼‰</li>
<li>è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”ä½¿ç”¨å¯¹è±¡ a çš„ä¸Šä¸‹æ–‡ï¼ˆè¿™æ˜¯æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›<code>Object</code>çš„æƒ…å†µï¼Œå¦‚æœæ„é€ å‡½æ•°è¿”å›äº†<code>Object</code>ï¼Œé‚£ä¹ˆå¯¹è±¡ a å°±èµ‹å€¼ä¸ºè¿™ä¸ªè¿”å›çš„å¯¹è±¡ï¼‰</li>
</ol>
<p><code>Object.create()</code> es5 æä¾›çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç®€ç‰ˆï¼šä¹Ÿæ­£æ˜¯åº”ç”¨äº†newä¼šè®¾ç½®__proto__é“¾æ¥çš„åŸç†ã€‚</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Object</span>.<span class="property">create</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="title class_">Object</span>.<span class="property">create</span> = <span class="keyword">function</span> (<span class="params">proto</span>) &#123;</span><br><span class="line">        <span class="keyword">function</span> <span class="title function_">F</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line">        F.<span class="property"><span class="keyword">prototype</span></span> = proto;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Object.setPrototypeOf</code> es6 æä¾›çš„ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="property">setPrototypeOf</span> =</span><br><span class="line">    <span class="title class_">Object</span>.<span class="property">setPrototypeOf</span> ||</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">obj, proto</span>) &#123;</span><br><span class="line">        obj.<span class="property">__proto__</span> = proto;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;;</span><br></pre></td></tr></table></figure>

<p>node çš„ inherits å°±æ˜¯ä½¿ç”¨ <code>Object.setPrototypeOf</code> å®ç°çš„</p>
<p>util.inherits <a target="_blank" rel="noopener" href="https://nodejs.org/docs/latest-v10.x/api/util.html#util_util_inherits_constructor_superconstructor">ç”¨æ³•</a> ä»¥åŠ <a target="_blank" rel="noopener" href="https://github.com/nodejs/node/blob/v10.24.1/lib/util.js#L274-L288">æºç </a></p>
<p>è¿˜å¯ä»¥çœ‹ä¸‹ babel ç¼–è¯‘ es6 ä¹‹åçš„ä»£ç </p>
<h4 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>ä¾‹å­è¿˜æ˜¯æŒºæ·±å¥¥çš„ï¼Œä½†æ„Ÿè§‰æ²¡æœ‰è®²çš„å¾ˆç®€å•ï¼Œçœ‹ç€æœ‰ç‚¹éš¾æ‡‚ï¼Œåªæ˜¯æŒ‚äº†ä¸€äº›ä¹¦çš„é“¾æ¥ï¼Œä½†è¿™äº›ä¹¦è¿˜æ˜¯ä¸é”™çš„ï¼Œå¯ä»¥çœ‹ä¸‹</p>
<p>è¿˜æ˜¯ä¸å¤ªæ‡‚ prototype å’Œ <code>__proto__</code> çš„åŒºåˆ«ï¼Ÿ</p>
<p>å¯ä»¥äº†è§£ä¸€ä¸‹ node çš„å…¶ä»–å·¥å…·å‡½æ•°æ˜¯æ€ä¹ˆå†™çš„ï¼Œæ¯”å¦‚ promisify ï¼Ÿ</p>
<p>å­¦äº†è¿‘ä¸‰å¹´å‰ç«¯ï¼ŒåŸå‹ç»§æ‰¿è¿˜æ˜¯ä¸èƒ½æ¸…æ™°ç†è§£ï¼Œæƒ­æ„§å‘€</p>
<h3 id="å¼ é‘«æ—­ï¼šå‰ç«¯å·¥ç¨‹å¸ˆåº”è¯¥ä¸ºç”¨æˆ·ä½“éªŒè´Ÿè´£"><a href="#å¼ é‘«æ—­ï¼šå‰ç«¯å·¥ç¨‹å¸ˆåº”è¯¥ä¸ºç”¨æˆ·ä½“éªŒè´Ÿè´£" class="headerlink" title="å¼ é‘«æ—­ï¼šå‰ç«¯å·¥ç¨‹å¸ˆåº”è¯¥ä¸ºç”¨æˆ·ä½“éªŒè´Ÿè´£"></a><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/CoqW5x9vMN87U3h5fuEoSw">å¼ é‘«æ—­ï¼šå‰ç«¯å·¥ç¨‹å¸ˆåº”è¯¥ä¸ºç”¨æˆ·ä½“éªŒè´Ÿè´£</a></h3><h4 id="å†…å®¹-1"><a href="#å†…å®¹-1" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h4><p>é¦–å…ˆæå‡ºäº†ä¸€äº›å¸¸è§çš„ä½“éªŒåº”è¯¥å¼•èµ·é‡è§†ï¼Œå¦‚æŒ‰é’®è¦æœ‰æŒ‰ä¸‹çš„åé¦ˆã€å›¾æ ‡ç‚¹å‡»åŒºåŸŸè¦å¤§ã€å¿½è§†è¾¹ç•Œå¼‚å¸¸å¤„ç†ï¼Œå¦‚ï¼šä½ç½‘é€Ÿã€æ— æ•°æ®ã€è„šæœ¬å‡ºé”™ç­‰ã€è¯­è¨€é”™è¯¯ï¼Œä½¿ç”¨ div ä»£æ›¿æŒ‰é’®ï¼Œä½¿ç”¨ div ä»£æ›¿é“¾æ¥</p>
<p>åé¢åˆ†ææ€»ç»“äº†å¼•èµ·è¿™äº›é—®é¢˜çš„åŸå› ï¼Œä»¥åŠè§£å†³æ–¹æ¡ˆ</p>
<h4 id="æ€è€ƒ-1"><a href="#æ€è€ƒ-1" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>åŸå› ä»¥åŠè§£å†³æ–¹æ¡ˆè®²çš„å¾ˆæ¸…æ™°ï¼Œéœ€è¦å¤§é‡åŠŸåº•ï¼Œå¦‚æœè®©æˆ‘æ€»ç»“ï¼Œå¯èƒ½å°±åªæ˜¯æœ‰ä¸ªæ¨¡ç³Šçš„æ¦‚å¿µï¼Œä½†ä¸èƒ½æ¸…æ™°çš„åˆ’åˆ†å‡ºæ¥</p>
<p>æˆ‘ä¹Ÿæœ‰è¿™ç§æ„Ÿå—ï¼Œå› ä¸ºæˆ‘è™½ç„¶æ˜¯å¼€å‘äººå‘˜ï¼Œä½†ä¹Ÿæ˜¯ç”¨æˆ·ï¼Œä½œä¸ºç”¨æˆ·æˆ‘ä¼šç»å¸¸åæ§½è¿™ä¸ªäº§å“åšçš„çœŸåƒåœ¾ï¼Œç”¨ç€çœŸéš¾å—ï¼Œä½†æˆ‘åœ¨å¼€å‘çš„æ—¶å€™ä¹Ÿç¡®å®ä¸æƒ³å› ä¸ºç”¨æˆ·ä½“éªŒè€Œå¤šå†™å¤§é‡ä»£ç ï¼Œæ„Ÿè§‰è¿™æ˜¯åƒåŠ›ä¸è®¨å¥½ï¼Œæ”¶ç›Šä¸æ˜æ˜¾ï¼Œæ¯”è¾ƒåŒæ„ç­‰çš„é‚£ä¸ªè§‚ç‚¹ï¼ˆä½†æˆ‘è®¤ä¸ºè¿˜è¦ç­‰å¾ˆä¹…ï¼‰ï¼Œç­‰åˆ°å¤§å®¶åŠŸèƒ½ä¸Šéƒ½å·®ä¸äº†å¤ªå¤šçš„æ—¶å€™ï¼Œå°±ä¼šåœ¨ç”¨æˆ·ä½“éªŒä¸Šå·èµ·æ¥äº†ï¼ˆåœ¨ç”¨æˆ·ä½“éªŒæ–¹é¢ï¼Œè¿˜æ˜¯å¾ˆä½©æœè‹¹æœçš„ï¼‰</p>
<h3 id="JS-çš„-6-ç§æ‰“æ–­ç‚¹çš„æ–¹å¼ï¼Œä½ ç”¨è¿‡å‡ ç§ï¼Ÿ"><a href="#JS-çš„-6-ç§æ‰“æ–­ç‚¹çš„æ–¹å¼ï¼Œä½ ç”¨è¿‡å‡ ç§ï¼Ÿ" class="headerlink" title="JS çš„ 6 ç§æ‰“æ–­ç‚¹çš„æ–¹å¼ï¼Œä½ ç”¨è¿‡å‡ ç§ï¼Ÿ"></a><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/KttRDmTyO3wgbNXGbEvPlw">JS çš„ 6 ç§æ‰“æ–­ç‚¹çš„æ–¹å¼ï¼Œä½ ç”¨è¿‡å‡ ç§ï¼Ÿ</a></h3><h4 id="å†…å®¹-2"><a href="#å†…å®¹-2" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h4><ol>
<li>æ™®é€šæ–­ç‚¹</li>
<li>åŠ æ¡ä»¶çš„æ™®é€šæ–­ç‚¹</li>
<li>DOM æ–­ç‚¹ï¼ˆå½“å­å…ƒç´ å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼‰</li>
<li>Url æ–­ç‚¹</li>
<li>event listener æ–­ç‚¹ï¼ˆå¦‚é¼ æ ‡ç‚¹å‡»äº‹ä»¶ï¼‰</li>
<li>Node çš„ error æ–­ç‚¹ï¼ˆåªæœ‰ vscode å¯ä»¥ï¼‰</li>
</ol>
<h4 id="æ€è€ƒ-2"><a href="#æ€è€ƒ-2" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h4><p>dom url å’Œ listener å­¦åˆ°äº†ï¼Œä½†ä¸€èˆ¬åœ¨ä»€ä¹ˆæƒ…å†µä½¿ç”¨å‘¢ï¼Ÿï¼ˆå­¦åˆ°äº†ï¼Œå¹¶ä¸”ç”¨äº†ï¼Œæ‰æ˜¯çœŸæ­£çš„ä¼šäº†ï¼‰</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://acmu.github.io/2021/12/27/weekly/02/" data-id="cl1ztfbs4000tamooak28gvlr" data-title="æ˜è¿œå‘¨åˆŠï¼ˆç¬¬ 2 æœŸï¼‰ğŸ¤©" class="article-share-link">åˆ†äº«</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/my-blog/tags/%E5%91%A8%E5%88%8A/" rel="tag">å‘¨åˆŠ</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-weekly/01" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/my-blog/2021/12/27/weekly/01/" class="article-date">
  <time class="dt-published" datetime="2021-12-27T15:13:20.000Z" itemprop="datePublished">2021-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/my-blog/2021/12/27/weekly/01/">æ˜è¿œå‘¨åˆŠï¼ˆç¬¬ 1 æœŸï¼‰ğŸ¤©</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>æ•´ç†æ±‡æ€»ä¸€å‘¨çœ‹åˆ°çš„æ–‡ç« ä¸å­¦åˆ°çš„çŸ¥è¯†ï¼ˆ2021-12-10 ~ 2021-12-16ï¼‰</p>
<h2 id="æ–‡ç« "><a href="#æ–‡ç« " class="headerlink" title="æ–‡ç« "></a>æ–‡ç« </h2><h3 id="React-ä¸­çš„-TS-ç±»å‹è¿‡æ»¤åŸæ¥æ˜¯è¿™ä¹ˆåšçš„ï¼"><a href="#React-ä¸­çš„-TS-ç±»å‹è¿‡æ»¤åŸæ¥æ˜¯è¿™ä¹ˆåšçš„ï¼" class="headerlink" title="React ä¸­çš„ TS ç±»å‹è¿‡æ»¤åŸæ¥æ˜¯è¿™ä¹ˆåšçš„ï¼"></a><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/EkcFlwTu6u9gC-8nvU0olQ">React ä¸­çš„ TS ç±»å‹è¿‡æ»¤åŸæ¥æ˜¯è¿™ä¹ˆåšçš„ï¼</a></h3><h4 id="å†…å®¹"><a href="#å†…å®¹" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h4><p>å¦‚ä½•ç†è§£è¿™æ®µ ts ç±»å‹ä»£ç ï¼Ÿ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">FilterConditionally</span>&lt;<span class="title class_">Source</span>, <span class="title class_">Condition</span>&gt; = <span class="title class_">Pick</span>&lt;</span><br><span class="line">    <span class="title class_">Source</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        [K <span class="keyword">in</span> keyof <span class="title class_">Source</span>]: <span class="title class_">Source</span>[K] <span class="keyword">extends</span> <span class="title class_">Condition</span> ? K : <span class="built_in">never</span>;</span><br><span class="line">    &#125;[keyof <span class="title class_">Source</span>]</span><br><span class="line">&gt;;</span><br></pre></td></tr></table></figure>

<p>æœ‰å‡ ä¸ªåŸºç¡€çŸ¥è¯†è¦çŸ¥é“ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">b</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">c</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">d</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Keys</span> = keyof <span class="title class_">Example</span>;</span><br><span class="line"><span class="comment">// ç­‰ä»·äº type Keys = &#x27;a&#x27; | &#x27;b&#x27; | &#x27;c&#x27; | &#x27;d&#x27;</span></span><br></pre></td></tr></table></figure>

<p>Keyof ä¼šæ‹¿åˆ° key çš„å­—ç¬¦ä¸²</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Keys</span> = <span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;c&#x27;</span> | <span class="string">&#x27;d&#x27;</span>;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Obj</span> = &#123;</span><br><span class="line">    [T <span class="keyword">in</span> <span class="title class_">Keys</span>]: <span class="built_in">string</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// Obj çš„ç±»å‹ï¼š</span></span><br><span class="line"><span class="comment">// type Obj = &#123;</span></span><br><span class="line"><span class="comment">//     a: string;</span></span><br><span class="line"><span class="comment">//     b: string;</span></span><br><span class="line"><span class="comment">//     c: string;</span></span><br><span class="line"><span class="comment">//     d: string;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p>in å¯ä»¥æ‹¿åˆ°ç±»å‹åˆ—è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ ¹æ®ç”¨æ³•ï¼Œè¿˜å¿…é¡»è¦å£°æ˜ä¸€ä¸ªç±»å‹ T</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;&#125;</span><br><span class="line"><span class="keyword">interface</span> B <span class="keyword">extends</span> A &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> C = B <span class="keyword">extends</span> A ? <span class="built_in">number</span> : <span class="built_in">string</span>;</span><br><span class="line"><span class="comment">// type C = number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> D = A <span class="keyword">extends</span> B ? <span class="built_in">number</span> : <span class="built_in">string</span>;</span><br><span class="line"><span class="comment">// type D = number</span></span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ä½¿ç”¨æ¡ä»¶åˆ¤æ–­æ¥å¾—å‡ºç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">MarkUnwantedTypesAsNever</span>&lt;<span class="title class_">Source</span>, <span class="title class_">Condition</span>&gt; = &#123;</span><br><span class="line">    [K <span class="keyword">in</span> keyof <span class="title class_">Source</span>]: <span class="title class_">Source</span>[K] <span class="keyword">extends</span> <span class="title class_">Condition</span> ? K : <span class="built_in">never</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä½¿ç”¨äº†æ³›å‹ï¼Œå…¶å®æ³›å‹å°±ç›¸å½“äº JS ä¸­çš„å‡½æ•°ä¸€æ ·ï¼Œä½ ç»™æˆ‘å‚æ•°ï¼Œæˆ‘ç»™ä½ è¿”å›å€¼ï¼Œåªä¸è¿‡ TS çš„è¿”å›å€¼æ˜¯ç±»å‹è€Œå·²ï¼Œè¿™ä¸ªç»“è®ºåŒæ ·ä¹Ÿé€‚ç”¨äºéæ³›å‹ï¼Œå› ä¸ºé‚£ç§æƒ…å†µå°±ç›¸å½“äºæ²¡æœ‰ä¼ å…¥å‚æ•°ï¼Œå°±ç›´æ¥è¿”å›äº†ä¸€ä¸ªç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">b</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">c</span>: <span class="built_in">boolean</span>;</span><br><span class="line">    <span class="attr">d</span>: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Foo</span> = <span class="title class_">MarkUnwantedTypesAsNever</span>&lt;<span class="title class_">Example</span>, <span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="comment">// type Foo = &#123;</span></span><br><span class="line"><span class="comment">//     a: &quot;a&quot;;</span></span><br><span class="line"><span class="comment">//     b: &quot;b&quot;;</span></span><br><span class="line"><span class="comment">//     c: never;</span></span><br><span class="line"><span class="comment">//     d: never;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p>æ ¹æ®å¦‚ä¸Šåˆ†æï¼Œå³å¯ç†è§£</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Value</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;zero2one&#x27;</span> &#125;[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line"><span class="comment">// type Value = &quot;zero2one&quot;</span></span><br></pre></td></tr></table></figure>

<p>ç´¢å¼•è®¿é—®æ¥å£</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Value</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zero2one&#x27;</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">23</span>;</span><br><span class="line">&#125;[<span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;age&#x27;</span>];</span><br><span class="line"><span class="comment">// type Value = &quot;zero2one&quot; | 23</span></span><br></pre></td></tr></table></figure>

<p>è®¿é—®å¤šä¸ª</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Value</span> = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zero2one&#x27;</span>;</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">never</span>;</span><br><span class="line">&#125;[<span class="string">&#x27;name&#x27;</span> | <span class="string">&#x27;age&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰ä»·äº type Value = &quot;zero2one&quot;</span></span><br></pre></td></tr></table></figure>

<p>never ä¸èƒ½è¢«è®¿é—®åˆ°</p>
<p>è¿™æ˜¯å¯ä»¥åŠ ä¸Šç´¢å¼•è®¿é—®äº†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">MarkUnwantedTypesAsNever</span>&lt;<span class="title class_">Source</span>, <span class="title class_">Condition</span>&gt; = &#123;</span><br><span class="line">    [K <span class="keyword">in</span> keyof <span class="title class_">Source</span>]: <span class="title class_">Source</span>[K] <span class="keyword">extends</span> <span class="title class_">Condition</span> ? K : <span class="built_in">never</span>;</span><br><span class="line">&#125;[keyof <span class="title class_">Source</span>];</span><br></pre></td></tr></table></figure>

<p>å³å¯å¾—åˆ°</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">MarkUnwantedTypesAsNever</span>&lt;<span class="title class_">Source</span>, <span class="title class_">Condition</span>&gt; = &#123;</span><br><span class="line">    [K <span class="keyword">in</span> keyof <span class="title class_">Source</span>]: <span class="title class_">Source</span>[K] <span class="keyword">extends</span> <span class="title class_">Condition</span> ? K : <span class="built_in">never</span>;</span><br><span class="line">&#125;[keyof <span class="title class_">Source</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">b</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">c</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">d</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Foo</span> = <span class="title class_">MarkUnwantedTypesAsNever</span>&lt;<span class="title class_">Example</span>, <span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="comment">// type Foo = &quot;a&quot; | &quot;b&quot;</span></span><br></pre></td></tr></table></figure>

<p>æœ€åéœ€è¦çœ‹ä¸€ä¸‹ Pickï¼Œè¿™æ˜¯ ts å†…ç½®çš„</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Pick</span>&lt;T, K <span class="keyword">extends</span> keyof T&gt; = &#123;</span><br><span class="line">    [P <span class="keyword">in</span> K]: T[P];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä½œç”¨æ˜¯ç­›é€‰å‡ºç±»å‹ T ä¸­æŒ‡å®šçš„æŸäº›å±æ€§</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> A &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attr">b</span>: <span class="number">2</span>;</span><br><span class="line">    <span class="attr">c</span>: <span class="number">3</span>;</span><br><span class="line">    <span class="attr">d</span>: <span class="number">4</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> C = <span class="title class_">Pick</span>&lt;A, <span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;c&#x27;</span>&gt;;</span><br><span class="line"><span class="comment">// type C = &#123;</span></span><br><span class="line"><span class="comment">//     a: 1;</span></span><br><span class="line"><span class="comment">//     c: 3;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆå³å¯å®ç°</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">FilterConditionally</span>&lt;<span class="title class_">Source</span>, <span class="title class_">Condition</span>&gt; = <span class="title class_">Pick</span>&lt;</span><br><span class="line">    <span class="title class_">Source</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        [K <span class="keyword">in</span> keyof <span class="title class_">Source</span>]: <span class="title class_">Source</span>[K] <span class="keyword">extends</span> <span class="title class_">Condition</span> ? K : <span class="built_in">never</span>;</span><br><span class="line">    &#125;[keyof <span class="title class_">Source</span>]</span><br><span class="line">&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">b</span>: <span class="built_in">string</span>;</span><br><span class="line">    <span class="attr">c</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="attr">d</span>: <span class="built_in">boolean</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Foo</span> = <span class="title class_">FilterConditionally</span>&lt;<span class="title class_">Example</span>, <span class="built_in">string</span>&gt;;</span><br><span class="line"><span class="comment">// type Foo = &#123;</span></span><br><span class="line"><span class="comment">//     a: string;</span></span><br><span class="line"><span class="comment">//     b: string;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="æ„Ÿæ‚Ÿ"><a href="#æ„Ÿæ‚Ÿ" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h4><p>å†™çš„å¾ˆå¥½ï¼Œå°¤å…¶æ˜¯è¿™äº›ä¾‹å­è®¾è®¡ï¼Œå¾ªåºæ¸è¿›ã€‚çœ‹çš„æ—¶å€™æ„Ÿè§‰ä¸€èˆ¬ï¼Œå†™çš„æŒºç®€å•çš„ï¼Œä½†è®©è‡ªå·±å†è¾“å‡ºä¸€éæ—¶ï¼Œæ‰çŸ¥é“ä¸æ˜¯é‚£ä¹ˆä¸€å›äº‹ï¼Œèƒ½å†™å‡ºè®©è¯»è€…è§‰å¾—å¾ˆç®€å•çš„æ–‡ç« ï¼Œè¿˜æ˜¯å¾ˆéš¾çš„ï¼Œéœ€è¦ä¸€å®šåŠŸåº•ã€‚</p>
<p>è¿™é‡Œæˆ‘åœ¨å¤è¿°æ—¶ï¼Œæƒ³è‡ªå·±å»ä¼˜åŒ–ä¸€ä¸‹ï¼Œä½†å‘ç°å†…å®¹å‡ ä¹æ²¡æœ‰ä»€ä¹ˆå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹äº†ã€‚å¯ä»¥çœ‹ä¸‹ä½œè€…çš„å…¶ä»–æ–‡ç« ã€‚</p>
<h3 id="å…³äºå°ç¨‹åºçš„ä¸€åˆ‡ï¼Œè¯»è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï½"><a href="#å…³äºå°ç¨‹åºçš„ä¸€åˆ‡ï¼Œè¯»è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï½" class="headerlink" title="å…³äºå°ç¨‹åºçš„ä¸€åˆ‡ï¼Œè¯»è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï½"></a><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/xz_otxPXEnnUxQuC-ASkpg">å…³äºå°ç¨‹åºçš„ä¸€åˆ‡ï¼Œè¯»è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï½</a></h3><h4 id="å†…å®¹-1"><a href="#å†…å®¹-1" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h4><p>å°ç¨‹åºå¹¶ä¸æ˜¯ä¸éœ€è¦å®‰è£…ï¼Œåªæ˜¯å®ƒå®¹é‡å°ï¼Œä¸‹è½½çš„é€Ÿåº¦å¾ˆå¿«è€Œå·²ã€‚å°ç¨‹åºçš„æ¶æ„éƒ½æ˜¯åŸºäºåŒçº¿ç¨‹ï¼Œåˆ†åˆ«æ˜¯ js æ‰§è¡Œçº¿ç¨‹ã€é¡µé¢æ¸²æŸ“çº¿ç¨‹ï¼Œä¸¤è€…çš„äº¤äº’éœ€è¦ jsBridgeï¼Œä½¿ç”¨äº†å‘å¸ƒè®¢é˜…æ¨¡å¼</p>
<h4 id="æ„Ÿæ‚Ÿ-1"><a href="#æ„Ÿæ‚Ÿ-1" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h4><p>å‘å¸ƒè®¢é˜…æ¨¡å¼å¥½å¼ºå‘€ï¼Œå¥½å¤šåœ°æ–¹éƒ½ç”¨åˆ°äº†ï¼Œæ¯”å¦‚ DOM çš„ç›‘å¬äº‹ä»¶ã€webpack çš„ tapable ç­‰ç­‰</p>
<p>æœ¬æ–‡è¿˜å±•ç¤ºäº†äº›æºç ï¼Œçœ‹ä¸æ‡‚ï¼Œå…¶å®çœ‹çš„æ—¶å€™å¯ä»¥å¿«é€Ÿç•¥è¿‡çš„</p>
<h3 id="ä»-vue3-å’Œ-vite-æºç ä¸­ï¼Œæˆ‘å­¦åˆ°äº†ä¸€è¡Œä»£ç ç»Ÿä¸€è§„èŒƒå›¢é˜ŸåŒ…ç®¡ç†å™¨çš„ç¥å™¨"><a href="#ä»-vue3-å’Œ-vite-æºç ä¸­ï¼Œæˆ‘å­¦åˆ°äº†ä¸€è¡Œä»£ç ç»Ÿä¸€è§„èŒƒå›¢é˜ŸåŒ…ç®¡ç†å™¨çš„ç¥å™¨" class="headerlink" title="ä» vue3 å’Œ vite æºç ä¸­ï¼Œæˆ‘å­¦åˆ°äº†ä¸€è¡Œä»£ç ç»Ÿä¸€è§„èŒƒå›¢é˜ŸåŒ…ç®¡ç†å™¨çš„ç¥å™¨"></a><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Y2MxoZmqtUj-I-jbBK-9Ow">ä» vue3 å’Œ vite æºç ä¸­ï¼Œæˆ‘å­¦åˆ°äº†ä¸€è¡Œä»£ç ç»Ÿä¸€è§„èŒƒå›¢é˜ŸåŒ…ç®¡ç†å™¨çš„ç¥å™¨</a></h3><h4 id="å†…å®¹-2"><a href="#å†…å®¹-2" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h4><p>ä½¿ç”¨ npm çš„ preintsall é’©å­åŠ  node çš„ process è·å–å‘½ä»¤è¡Œçš„è¾“å…¥ï¼Œå¦‚æœä¸æ˜¯ pnpmï¼Œé‚£ä¹ˆå°±æŠ¥é”™é€€å‡º process.exit(1)</p>
<h4 id="æ„Ÿæ‚Ÿ-2"><a href="#æ„Ÿæ‚Ÿ-2" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h4><p>æ ‡é¢˜æœ‰äº›é•¿ï¼ŒåºŸè¯æœ‰äº›å¤šï¼Œæ ‡é¢˜è¯´çš„ä¹Ÿæ¨¡ç³Šï¼Œæˆ‘æœ¬æ¥ä»¥ä¸ºæ˜¯ç®¡ç†ä¸‰æ–¹åŒ…ç‰ˆæœ¬çš„æ–‡ç« å‘¢ï¼Œå”‰ï¼Œæ˜¯æˆ‘æƒ³å¤šäº†</p>
<h3 id="Dan-Abramov-æ¥å—æ²¹ç®¡-UP-ä¸»çš„é¢è¯•æŒ‘æˆ˜ï¼Œç»“æœå·®ç‚¹æ²¡å†™å‡ºæ¥å±…ä¸­"><a href="#Dan-Abramov-æ¥å—æ²¹ç®¡-UP-ä¸»çš„é¢è¯•æŒ‘æˆ˜ï¼Œç»“æœå·®ç‚¹æ²¡å†™å‡ºæ¥å±…ä¸­" class="headerlink" title="Dan Abramov æ¥å—æ²¹ç®¡ UP ä¸»çš„é¢è¯•æŒ‘æˆ˜ï¼Œç»“æœå·®ç‚¹æ²¡å†™å‡ºæ¥å±…ä¸­"></a><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/ilGcZlc5T1iKGVegigwbkg">Dan Abramov æ¥å—æ²¹ç®¡ UP ä¸»çš„é¢è¯•æŒ‘æˆ˜ï¼Œç»“æœå·®ç‚¹æ²¡å†™å‡ºæ¥å±…ä¸­</a></h3><h4 id="å†…å®¹-3"><a href="#å†…å®¹-3" class="headerlink" title="å†…å®¹"></a>å†…å®¹</h4><p>ä¸€äº›é€šç”¨é—®é¢˜ï¼šè‡ªæˆ‘ä»‹ç»ã€let constã€redux ä½¿ç”¨åœºæ™¯ï¼ˆç°åœ¨çš„è¯ï¼Œä¼šä½¿ç”¨ react-query, relay, apollo ç­‰ä¸€äº›ç°ä»£çš„ react è¯·æ±‚çŠ¶æ€åº“ï¼‰ã€‚</p>
<p>dangerouslySetInnerHTML è¿™ä¸ª API çš„ä½¿ç”¨æ—¶æœºï¼šåœ¨æœåŠ¡ç«¯è¿”å› html å­—ç¬¦ä¸²æ—¶ï¼Œå¹¶ä¸”èƒ½ç¡®ä¿è¿™æ˜¯å®‰å…¨çš„ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ï¼Œå¦‚æœæ˜¯ä¸å®‰å…¨çš„ï¼Œé‚£ä¹ˆè¦å¯¹ HTML æ¶ˆæ¯’ï¼ˆsantizeï¼‰</p>
<p>æ•°æ®ç»“æ„çš„ä½¿ç”¨ï¼ˆäºŒå‰æ ‘é•œåƒåè½¬ï¼‰ï¼Œå¯ä»¥æ‰©å±•å‡ºåè½¬é“¾è¡¨å•¥çš„ã€‚</p>
<p>æ‰¾å…”å­é—®é¢˜</p>
<h4 id="æ„Ÿæ‚Ÿ-3"><a href="#æ„Ÿæ‚Ÿ-3" class="headerlink" title="æ„Ÿæ‚Ÿ"></a>æ„Ÿæ‚Ÿ</h4><p>å¾ˆæœ‰è¶£çš„æ–‡ç« ï¼Œæ²¡æƒ³åˆ°å›½å¤–çš„é¢è¯•å’Œå›½å†…çš„æ²¡å•¥åŒºåˆ«ã€‚å…”å­é—®é¢˜è¿˜æ˜¯æŒºéš¾çš„ï¼Œæˆ‘ä¸ä¼šï¼Œæ²¡æœ‰ä»€ä¹ˆæ€è·¯ï¼Œå¯ä»¥å­¦ä¹ ä¸‹</p>
<h2 id="é¸¡æ±¤"><a href="#é¸¡æ±¤" class="headerlink" title="é¸¡æ±¤"></a>é¸¡æ±¤</h2><p>å¹´è½»äººçœŸçš„å¾ˆå‰å®³ï¼Œç°åœ¨å°±æœ‰ç§æ„Ÿè§‰ï¼šå­¦ä¸è¿‡ä»–ä»¬äº†ï¼Œæœ‰ä¸€äº›ä½ åˆšåˆšå­¦ä¼šå¹¶ä½¿ç”¨çš„ä¸œè¥¿ï¼Œå¹¶ä¸”å¼•ä»¥ä¸ºå‚²çš„ä¸œè¥¿ï¼Œå·²ç»è¢«äººå®¶æ€»ç»“åœ¨æ–‡æ¡£ä¸­äº†ã€‚</p>
<p>ç”¨ä»€ä¹ˆè¯­è¨€æˆ–æ–¹æ³•ä¸é‡è¦ï¼Œèƒ½è§£å†³é—®é¢˜æœ€é‡è¦ï¼Œåšäº‹è¦æŠ“ä½æ ¹æœ¬ã€‚å°±åƒå…¬å¸å¹¶ä¸æ˜¯æ‰€æœ‰çš„äººéƒ½æ˜¯ç ”å‘ï¼Œè¿˜æœ‰ä¸€å¤§éƒ¨åˆ†çš„é”€å”®ï¼Œå¯¹äºå…¬å¸æ¥è®²ï¼Œèµšé’±å¾ˆé‡è¦ã€‚æ‰€ä»¥ä¹Ÿä¸è¦æ€»æ˜¯æ²‰æµ¸åœ¨å­¦ä¹ æ–°è¯­è¨€ã€æ–°çŸ¥è¯†çš„è‡ªæˆ‘å¨±ä¹ä¸­ï¼Œåªè¦èƒ½è§£å†³é—®é¢˜ï¼Œä»€ä¹ˆè¯­è¨€éƒ½å¯ä»¥ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://acmu.github.io/2021/12/27/weekly/01/" data-id="cl1ztfbs2000qamoo9rhgb473" data-title="æ˜è¿œå‘¨åˆŠï¼ˆç¬¬ 1 æœŸï¼‰ğŸ¤©" class="article-share-link">åˆ†äº«</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/my-blog/tags/%E5%91%A8%E5%88%8A/" rel="tag">å‘¨åˆŠ</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-TypeScript/pkg" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/my-blog/2020/09/13/TypeScript/pkg/" class="article-date">
  <time class="dt-published" datetime="2020-09-13T18:18:49.000Z" itemprop="datePublished">2020-09-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/my-blog/2020/09/13/TypeScript/pkg/">NPM å‘å¸ƒ TS åŒ…</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:33_V4AWDN.png"></p>
<p>æœ¬æ–‡ä½¿ç”¨ç®€å•çš„ TypeScriptï¼ˆå³ TSï¼‰ï¼Œè®²è§£ NPM åŒ…çš„å‘å¸ƒæµç¨‹ï¼ŒåŒ…æ‹¬ä»£ç æ ¼å¼åŒ–ã€lintã€å•å…ƒæµ‹è¯•ç­‰</p>
<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-TS"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-TS" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ TS"></a>ä¸ºä»€ä¹ˆè¦ç”¨ TS</h2><ul>
<li><p>  æ›´å¥å£®çš„ä»£ç ä»¥åŠæ›´æ˜“ç»´æŠ¤ã€‚</p>
</li>
<li><p>  ä½¿ç”¨è¿™ä¸ªåŒ…çš„äººï¼Œå¯ä»¥ä½¿ç”¨ ts æˆ– jsã€‚ä½†å¦‚æœä½ åªç”¨ js å†™çš„è¯ï¼Œå½“ä½ çš„åŒ…å˜æµè¡Œä¹‹åï¼Œts ä½¿ç”¨è€…å°±éœ€è¦ç±»å‹å®šä¹‰ï¼Œè¿™æ—¶å†åŠ çš„è¯ï¼Œå°±è€—æ—¶é—´ã€æ˜“å‡ºé”™è¿˜éš¾æ›´æ–°ã€‚</p>
</li>
<li><p>  å½“ä½ åœ¨ä»£ç æ–‡ä»¶ä¸­å†™äº†ç±»å‹å®šä¹‰ï¼Œä½¿ç”¨è€…å°±ä¸éœ€è¦å•ç‹¬å»ä¸‹è½½ <code>@types/xxx</code> ç±»å‹å®šä¹‰äº†ã€‚</p>
</li>
<li><p>  å¼ºç±»å‹å®šä¹‰ä¹Ÿç®—æ˜¯ä¸€ç§æ–‡æ¡£çš„è‡ªæˆ‘æè¿°ï¼Œä½¿ä»£ç æ˜“è¯»ã€‚</p>
</li>
<li><p>  å³ä½¿ä½¿ç”¨è€…ä¸ç”¨ tsï¼Œä½†ä¸€äº›ç¼–è¾‘å™¨ä¹Ÿä¼šæ ¹æ®ç±»å‹å®šä¹‰ç»™ä½ æ›´å¥½çš„ä»£ç æç¤ºã€‚</p>
</li>
</ul>
<h2 id="å¼€å§‹é¡¹ç›®"><a href="#å¼€å§‹é¡¹ç›®" class="headerlink" title="å¼€å§‹é¡¹ç›®"></a>å¼€å§‹é¡¹ç›®</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å»ºç›®å½•</span></span><br><span class="line">mkdir my-awesome-greeter &amp;&amp; cd my-awesome-greeter</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä½¿ç”¨ git</span></span><br><span class="line">git init</span><br><span class="line">echo &quot;# My Awesome Greeter&quot; &gt;&gt; README.md</span><br><span class="line">git add . &amp;&amp; git commit -m &quot;Initial commit&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ  github è¿œç¨‹ä»“åº“ï¼Œä¸‹é¢åœ°å€å¯ä»¥æ›¿æ¢æˆä½ è‡ªå·±çš„è¿œç¨‹ä»“åº“</span></span><br><span class="line">git remote add origin git@github.com:Acmu/zmy-greet.git</span><br><span class="line">git push -u origin master</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">åˆå§‹åŒ– npm é¡¹ç›®ï¼ŒæŠŠ name æ”¹ä¸ºä½ æƒ³è¦ä¸Šä¼ çš„åŒ…åï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯ zmy-greet</span></span><br><span class="line">npm init -y</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">æ·»åŠ  gitignore</span></span><br><span class="line">echo &quot;node_modules&quot; &gt;&gt; .gitignore</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®‰è£… ts</span></span><br><span class="line">npm install --save-dev typescript</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ä¸ºäº†ä½¿ ts å¯ä»¥æ­£å¸¸ç¼–è¯‘ï¼Œéœ€è¦æ·»åŠ é…ç½®æ–‡ä»¶</span></span><br><span class="line">touch tsconfig.json</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å†…å®¹å¦‚ä¸‹</span></span><br><span class="line">```</span><br><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line">    &quot;target&quot;: &quot;es5&quot;, // ç¼–è¯‘ç›®æ ‡ä»£ç ä¸º es5 çš„ï¼Œä¸ºäº†å…¼å®¹æ›´å¤šçš„æµè§ˆå™¨</span><br><span class="line">    &quot;module&quot;: &quot;commonjs&quot;, // ä½¿ç”¨ cjs æ¨¡å—è§£ææœºåˆ¶</span><br><span class="line">    &quot;declaration&quot;: true, // å½“æ‰“åŒ…æ—¶ï¼Œç”Ÿæˆç±»å‹å®šä¹‰æ–‡ä»¶</span><br><span class="line">    &quot;outDir&quot;: &quot;./lib&quot;, // æ‰“åŒ…çš„åœ°å€ä¸º ./lib</span><br><span class="line">    &quot;strict&quot;: true</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;include&quot;: [&quot;src&quot;],</span><br><span class="line">  &quot;exclude&quot;: [&quot;node_modules&quot;, &quot;**/__tests__/*&quot;] // ä¸ç¼–è¯‘ node_modules å’Œ __tests__ æ–‡ä»¶å¤¹ï¼Œå› ä¸ºä»–ä»¬åªåœ¨å¼€å‘æ—¶ä½¿ç”¨</span><br><span class="line">&#125;</span><br><span class="line">```</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ç¼–å†™ä»£ç </span></span><br><span class="line">mkdir src &amp;&amp; touch src/index.ts</span><br></pre></td></tr></table></figure>

<p>ä»£ç å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">Greeter</span> = (<span class="params">name: <span class="built_in">string</span></span>) =&gt; <span class="string">`Hello <span class="subst">$&#123;name&#125;</span>`</span>;</span><br><span class="line">t;</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ  build å‘½ä»¤ä»¥åŠè¿è¡Œï¼š</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:27_cArxJ1.png" alt="img"></p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:27_nyjAiS.png" alt="img"></p>
<p>è¿™æ—¶å°±èƒ½çœ‹åˆ°ç”Ÿæˆçš„ lib æ–‡ä»¶å¤¹ä»¥åŠ .d.ts å£°æ˜æ–‡ä»¶äº†ã€‚</p>
<p>è¿™æ—¶ï¼Œåº”è¯¥æŠŠ lib æ–‡ä»¶å¤¹ä¹Ÿå¿½ç•¥æ‰ã€‚</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:14_ipOthB.png" alt="img"></p>
<p>lib å‰çš„åæ–œçº¿ä»£è¡¨åªå¿½ç•¥æ ¹è·¯å¾„ä¸‹çš„ libï¼Œå¦‚æœå…¶ä»–å­æ–‡ä»¶å¤¹æœ‰ lib æ˜¯ä¸ä¼šå¿½ç•¥çš„ï¼Œè€Œ node_modules å°±æ˜¯ä¸ç®¡åœ¨å“ªé‡Œéƒ½ä¼šè¢«å¿½ç•¥</p>
<p>æ·»åŠ æ ¼å¼åŒ–å’Œ lint</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev eslint <span class="meta">@typescript</span>-eslint/parser <span class="meta">@typescript</span>-eslint/eslint-plugin prettier eslint-plugin-prettier eslint-config-prettier</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ é…ç½®æ–‡ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .eslintrc.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">es6</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">jest</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">parser</span>: <span class="string">&#x27;@typescript-eslint/parser&#x27;</span>,</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&#x27;prettier&#x27;</span>, <span class="string">&#x27;@typescript-eslint&#x27;</span>],</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:prettier/recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;prettier/prettier&#x27;</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// .prettierrc</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;printWidth&quot;</span>: <span class="number">100</span>,</span><br><span class="line">  <span class="string">&quot;trailingComma&quot;</span>: <span class="string">&quot;all&quot;</span>,</span><br><span class="line">  <span class="string">&quot;singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;proseWrap&quot;</span>: <span class="string">&quot;never&quot;</span>,</span><br><span class="line">  <span class="string">&quot;arrowParens&quot;</span>: <span class="string">&quot;avoid&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// .prettierignore</span></span><br><span class="line">node_modules</span><br><span class="line">/lib</span><br><span class="line"></span><br><span class="line"><span class="comment">// .eslintignore</span></span><br><span class="line">node_modules</span><br><span class="line">/lib</span><br></pre></td></tr></table></figure>

<p>å†æ·»åŠ æ ¼å¼åŒ–å‘½ä»¤</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;format&quot;</span>: <span class="string">&quot;prettier --write &#x27;**/*.&#123;js,jsx,ts,tsx&#125;&#x27;&quot;</span>,</span><br><span class="line"><span class="string">&quot;lint&quot;</span>: <span class="string">&quot;eslint . --ext &#x27;.js,.jsx,.ts,.tsx&#x27;&quot;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å¯ä»¥è¿è¡Œä¸€ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run lint</span><br><span class="line">npm run format</span><br></pre></td></tr></table></figure>

<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:27_6WHReR.png" alt="img"></p>
<p>å½“æˆ‘ä»¬æŠŠåŒ…ä¸Šä¼ åˆ° npm ä»“åº“æ—¶ï¼Œè‚¯å®šåªå¸Œæœ›ä¸Šä¼ æ‰“åŒ…åçš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æºä»£ç ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥å®ç°ï¼Œåˆ†åˆ«æ˜¯ç¼–å†™ <code>.npmignore</code> æ–‡ä»¶ï¼Œå’Œä½¿ç”¨ <code>package.json</code> ä¸­çš„ files å­—æ®µï¼Œåè€…æ›´å¥½ä¸€äº›ï¼Œå› ä¸ºå‰è€…è¦å†™çš„ä¸œè¥¿å¯èƒ½ä¼šæœ‰å¾ˆå¤šã€‚<code>package.json</code> ä¸­çš„ files å¯ä»¥è¿™æ ·å†™ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;files&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;lib/**/*&quot;</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å°±åªæœ‰ lib æ–‡ä»¶å¤¹ä¸‹çš„æ‰ä¼šä¸Šä¼ åˆ° npm ä»“åº“å•¦ï¼ŒREADME.md å’Œ package.json å·²ç»é»˜è®¤åŠ å…¥äº†ã€‚</p>
<p>å¢åŠ æµ‹è¯•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev jest @types/jest ts-jest</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™é…ç½®æ–‡ä»¶ <code>jest.config.js</code> å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">roots</span>: [<span class="string">&#x27;&lt;rootDir&gt;/src&#x27;</span>],</span><br><span class="line">    <span class="attr">testMatch</span>: [</span><br><span class="line">        <span class="string">&#x27;**/__tests__/**/*.+(ts|tsx|js)&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;**/?(*.)+(spec|test).+(ts|tsx|js)&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">transform</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;^.+\\.(ts|tsx)$&#x27;</span>: <span class="string">&#x27;ts-jest&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>å¢åŠ  test å‘½ä»¤</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;test&quot;</span>: <span class="string">&quot;jest&quot;</span>,</span><br></pre></td></tr></table></figure>

<p>å¢åŠ æµ‹è¯•æ–‡ä»¶ <code>src/__test__/Greeter.test.ts</code> å¦‚ä¸‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Greeter</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;../index&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title function_">test</span>(<span class="string">&#x27;My Greeter&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">expect</span>(<span class="title class_">Greeter</span>(<span class="string">&#x27;Carl&#x27;</span>)).<span class="title function_">toBe</span>(<span class="string">&#x27;Hello Carl&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œ test å‘½ä»¤æŸ¥çœ‹</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:27_j5QlA8.png" alt="img"></p>
<p>è¿™é‡Œå¯ä»¥ä¸‹è½½ vscode jest æ’ä»¶ï¼Œè¿›è¡Œæµ‹è¯•ç”¨ä¾‹çš„å®æ—¶ç»“æœæŸ¥çœ‹</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:27_GFmmkE.png" alt="img"></p>
<p>ä½¿ç”¨ npm <a target="_blank" rel="noopener" href="https://docs.npmjs.com/misc/scripts">ç‰¹æ®Šå‘½ä»¤</a>ï¼š</p>
<p>å¯¹äºä¸€ä¸ªä¼˜ç§€çš„åŒ…ï¼Œæˆ‘ä»¬åº”è¯¥å°†æ“ä½œå°½å¯èƒ½çš„è‡ªåŠ¨åŒ–ï¼Œæ¥ä¸‹æ¥çœ‹å‡ ä¸ªç‰¹æ®Šçš„å‘½ä»¤ï¼š</p>
<table>
<thead>
<tr>
<th>å‘½ä»¤</th>
<th>æ“ä½œ</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td>prepare</td>
<td>npm run build</td>
<td>åœ¨æ‰“åŒ…å’Œå‘å¸ƒä¹‹å‰è¿è¡Œï¼Œé€‚åˆ build</td>
</tr>
<tr>
<td>prepublishOnly</td>
<td>npm test &amp;&amp; npm run lint</td>
<td>åœ¨ prepare ä¹‹å‰ï¼Œå¹¶ä¸”åªæœ‰ npm publish æ—¶æ‰è¿è¡Œï¼Œè¿™é‡Œåº”è¯¥æ‰§è¡Œæµ‹è¯•å’Œ lintï¼Œä¿è¯æˆ‘ä»¬ä¸ä¼šå‘å¸ƒä¸å¥½çš„ä»£ç </td>
</tr>
<tr>
<td>preversion</td>
<td>npm run lint</td>
<td>åœ¨æ–°å»º tag ä¹‹å‰è¿è¡Œ</td>
</tr>
<tr>
<td>version</td>
<td>npm run format &amp;&amp; git add -A src</td>
<td>åœ¨æ”¹äº† tag ä¹‹åï¼Œä½† commit ä¹‹å‰</td>
</tr>
<tr>
<td>postversion</td>
<td>git push &amp;&amp; git push â€“tags</td>
<td>åœ¨æ”¹äº† tag ä¹‹åï¼Œcommit ä¹‹å</td>
</tr>
</tbody></table>
<p>æœ€åå¦‚ä¸‹ï¼Œå†æ·»åŠ ä¸Š main å’Œ types å­—æ®µ</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:27_Ni3P1w.png" alt="img"></p>
<p>ç™»é™†ä½ çš„ npm è´¦å·ï¼Œæ‰§è¡Œ npm publish å‘½ä»¤ï¼Œæ³¨æ„è¦ä½¿ç”¨ npm é»˜è®¤æºå“¦</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:27_yuuO9X.png" alt="img"></p>
<p>è¿™æ ·å°±å‘å¸ƒæˆåŠŸäº†ï¼Œä¹Ÿæ‰§è¡Œäº† prepare å’Œ prepublishOnly å‘½ä»¤ï¼Œä¸‹é¢ä½¿ç”¨ npm version patch å‡çº§ä¸ªç‰ˆæœ¬çœ‹ä¸€ä¸‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:27_W8oIL8.png" alt="img"></p>
<p>ä¹Ÿçœ‹åˆ°å¦‚é¢„æœŸæ‰§è¡Œäº†å‘½ä»¤ï¼Œæœ€åå† npm publish ä¸€ä¸‹ï¼Œå°±èƒ½æ›´æ–°ç‰ˆæœ¬äº†ã€‚</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:14_BhTAE6.png" alt="img"></p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:28_dE1WDJ.png" alt="img"></p>
<p>æœ€åä½¿ç”¨åŒ…å¦‚ä¸‹ï¼š</p>
<p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/30_11:14_Vix3LL.png" alt="img"></p>
<h3 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h3><p>å­¦åˆ°äº†ç»™ ts å†™ lint é…ç½®ã€jest ç®€å• ts é…ç½®ã€npm çš„ç‰¹æ®Šå‘½ä»¤ï¼Œæ˜¯ä¸€ä¸ªæ¯”è¾ƒè§„èŒƒçš„åŒ…å‘å¸ƒæµç¨‹ã€‚</p>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a target="_blank" rel="noopener" href="https://itnext.io/step-by-step-building-and-publishing-an-npm-typescript-package-44fe7164964c">è¿™ç¯‡æ–‡ç« </a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Acmu/zmy-greet">å¯¹åº”ä»“åº“</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://acmu.github.io/2020/09/13/TypeScript/pkg/" data-id="cl1ztfbrq0006amooc9fl0q3x" data-title="NPM å‘å¸ƒ TS åŒ…" class="article-share-link">åˆ†äº«</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/my-blog/tags/TS/" rel="tag">TS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-project/lint" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/my-blog/2020/08/02/project/lint/" class="article-date">
  <time class="dt-published" datetime="2020-08-02T11:26:20.000Z" itemprop="datePublished">2020-08-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/my-blog/2020/08/02/project/lint/">ESLint å’Œ Prettier è§„èŒƒä»£ç </a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="https://raw.githubusercontent.com/acmu/pictures/master/uPic/2021-12/28_13:01_rXggN1.png" alt="å¤´å›¾"></p>
<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-ESLintï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-ESLintï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ ESLintï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨ ESLintï¼Ÿ</h2><p>å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…å‘ç°ä¸€äº›æ˜¾è€Œæ˜“è§çš„é”™è¯¯ï¼Œå¦‚ï¼šä½¿ç”¨äº†æœªå®šä¹‰çš„å˜é‡ç­‰ï¼Œè¿˜å¯ä»¥ç»“åˆä¸€äº›ç¬¬ä¸‰æ–¹çš„è§„åˆ™å»æ£€æµ‹ä½ çš„ä»£ç æ˜¯å¦è§„èŒƒï¼Œå¦‚ï¼šreact çš„ prop-types ã€ hooks ç­‰ï¼Œè¿˜èƒ½ä¸€å®šç¨‹åº¦ä¸Šç¾åŒ–ä»£ç ï¼Œå¦‚ï¼šå­—ç¬¦ä¸²ä½¿ç”¨å•å¼•å·è¿˜æ˜¯åŒå¼•å·ã€ä¸€è¡Œä»£ç æœ«å°¾æ˜¯å¦è¦åŠ åˆ†å·ç­‰ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-Prettierï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨-Prettierï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨ Prettierï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦ç”¨ Prettierï¼Ÿ</h2><p>åˆšåˆšæœ‰è¯´åˆ°ï¼Œ<a target="_blank" rel="noopener" href="https://eslint.org/">ESLint</a> åªèƒ½ä¸€å®šç¨‹åº¦ä¸Šç¾åŒ–ä»£ç ï¼Œè€Œ Â <a target="_blank" rel="noopener" href="https://prettier.io/">Prettier</a> èƒ½å®Œæˆç¾åŒ–ä»£ç çš„å…¨éƒ¨å·¥ä½œï¼Œå¦‚ï¼šä¸€è¡Œè¶…è¿‡ 80 ä¸ªå­—ç¬¦å°±æˆªæ–­æ¢è¡Œã€æ›´å¥½çœ‹çš„ä¸‰å…ƒè¿ç®—ç¬¦å±•ç¤ºã€ç»™ JSX åŠ æ‹¬å·å±•ç¤ºç­‰ï¼Œå¹¶ä¸”å®ƒä¸æ­¢äº JavaScriptï¼Œè¿˜å¯ä»¥ç¾åŒ– CSSã€Markdown ç­‰å¤šç§è¯­è¨€ã€‚</p>
<p>å¹¶ä¸”å¾ˆå¤šå¤§çš„é¡¹ç›®éƒ½å·²ç»ä½¿ç”¨ä¸Šäº†ï¼Œå¦‚ <a target="_blank" rel="noopener" href="https://github.com/facebook/react">React</a>ã€<a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design/">AntD</a> ç­‰ç­‰ï¼Œå°¤å…¶æ˜¯å¯¹äºå›¢é˜Ÿå¤§ã€å¼€å‘äººå¤šçš„æƒ…å†µï¼Œè¿™ç§ä»£ç çš„è‡ªåŠ¨åŒ–å®¡æŸ¥å·¥å…·ï¼Œèƒ½è®© Code Review æ›´å‹å¥½ï¼Œèƒ½è®©åŒäº‹æ›´å…³æ³¨ä½ çš„å®ç°çš„ä¸šåŠ¡ä¸ä»£ç é€»è¾‘æœ¬èº«ï¼Œè€Œéè¿˜æ¢ä¸æ¢è¡Œã€åŠ ä¸åŠ é€—å·ï¼Œè¿™ç§å°äº‹ï¼Œè€Œä¸”è¿˜èƒ½ä¸€å®šç¨‹åº¦ä¸Šå®ç°å›¢é˜Ÿå†…ä»£ç é£æ ¼çš„ç»Ÿä¸€ã€‚ï¼ˆè¿™é‡Œä¸ºä»€ä¹ˆè¯´â€œä¸€å®šç¨‹åº¦â€ï¼Œæ˜¯å› ä¸ºæœ‰å¾ˆå¤šä»£ç é£æ ¼æ˜¯å·¥å…·æ£€æŸ¥ä¸äº†çš„ï¼Œæ¯”å¦‚æœ‰çš„äººä¼šç»™å˜é‡ const æœ‰çš„ä¼šç»™ letã€æœ‰çš„ç”¨ switch æœ‰çš„æ˜¯ if else ç­‰ç­‰ï¼Œæ‰€ä»¥æƒ³è¦è§„èŒƒè¿™äº›ï¼Œæœ€å¥½æ˜¯å›¢é˜Ÿå†…æœ‰ä¸ªä»£ç é£æ ¼æŒ‡å—æ–‡æ¡£ï¼Œæ˜ç¡®æŒ‡å‡ºï¼šè¿™æ ·æ˜¯å¥½çš„ï¼Œé‚£æ ·æ˜¯ä¸è¡Œçš„ï¼‰</p>
<h2 id="ä½¿ç”¨-ESLint-amp-Prettier"><a href="#ä½¿ç”¨-ESLint-amp-Prettier" class="headerlink" title="ä½¿ç”¨ ESLint &amp; Prettier"></a>ä½¿ç”¨ ESLint &amp; Prettier</h2><p>å®‰è£…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint prettier babel-eslint eslint-plugin-prettier eslint-config-prettier</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä½ è¿˜ä½¿ç”¨ JSX è¿˜éœ€å¦å¤–å®‰è£…ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint-plugin-react-hooks eslint-plugin-react</span><br></pre></td></tr></table></figure>

<p>eslint å’Œ prettier åªä¼šåœ¨å¼€å‘ç¯å¢ƒç”¨åˆ°ï¼Œ<code>babel-eslint</code> æ˜¯ <code>eslint-plugin-prettier</code> ä½¿ç”¨ Prettier æ ¼å¼ä»£ç <code>eslint-config-prettier</code> å…³é—­ ESLint ä¸ Prettier å†²çªçš„é…ç½®é¡¹ .prettierignore &amp; .eslintignore</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/dist</span><br><span class="line">/build</span><br><span class="line">/node_modules</span><br></pre></td></tr></table></figure>

<p>.prettierrc.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">singleQuote</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">trailingComma</span>: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">    <span class="attr">proseWrap</span>: <span class="string">&#x27;never&#x27;</span>,</span><br><span class="line">    <span class="attr">arrowParens</span>: <span class="string">&#x27;avoid&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>.eslintrc.js ï¼ˆä¸ä½¿ç”¨ JSXï¼Œåªæ˜¯ JS æ–‡ä»¶ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// const ERROR = &#x27;error&#x27;;</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">WARN</span> = <span class="string">&#x27;warn&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">OFF</span> = <span class="string">&#x27;off&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">es6</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">jest</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">extends</span>: [<span class="string">&#x27;eslint:recommended&#x27;</span>, <span class="string">&#x27;plugin:prettier/recommended&#x27;</span>],</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;babel-eslint&#x27;</span>,</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="string">&#x27;prettier&#x27;</span>],</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;prettier/prettier&#x27;</span>: <span class="variable constant_">WARN</span>,</span><br><span class="line">        <span class="string">&#x27;no-console&#x27;</span>: <span class="variable constant_">OFF</span>,</span><br><span class="line">        <span class="string">&#x27;no-debugger&#x27;</span>: <span class="variable constant_">OFF</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>.eslintrc.js ï¼ˆä½¿ç”¨ JSXï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="variable constant_">ERROR</span> = <span class="string">&#x27;error&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">WARN</span> = <span class="string">&#x27;warn&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">OFF</span> = <span class="string">&#x27;off&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">env</span>: &#123;</span><br><span class="line">        <span class="attr">browser</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">es6</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">node</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">jest</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">extends</span>: [</span><br><span class="line">        <span class="string">&#x27;eslint:recommended&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;plugin:react/recommended&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;plugin:prettier/recommended&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;babel-eslint&#x27;</span>,</span><br><span class="line">    <span class="attr">plugins</span>: [<span class="string">&#x27;react&#x27;</span>, <span class="string">&#x27;react-hooks&#x27;</span>, <span class="string">&#x27;prettier&#x27;</span>],</span><br><span class="line">    <span class="attr">rules</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;prettier/prettier&#x27;</span>: <span class="variable constant_">WARN</span>,</span><br><span class="line">        <span class="string">&#x27;no-console&#x27;</span>: <span class="variable constant_">OFF</span>,</span><br><span class="line">        <span class="string">&#x27;no-debugger&#x27;</span>: <span class="variable constant_">OFF</span>,</span><br><span class="line">        <span class="string">&#x27;react-hooks/rules-of-hooks&#x27;</span>: <span class="variable constant_">ERROR</span>,</span><br><span class="line">        <span class="string">&#x27;react-hooks/exhaustive-deps&#x27;</span>: <span class="variable constant_">WARN</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>npm script ä¸­åŠ ä¸Šè¿™ä¸¤å¥ï¼ˆä»£è¡¨æ ¼å¼æ‰€æœ‰çš„å¦‚ä¸‹ç»“å°¾çš„æ–‡ä»¶ï¼‰ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="string">&quot;prettier&quot;</span>: <span class="string">&quot;prettier --write &#x27;**/*.&#123;js,jsx,less,md&#125;&#x27;&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://acmu.github.io/2020/08/02/project/lint/" data-id="cl1ztfbrz000kamoo05oy4a5n" data-title="ESLint å’Œ Prettier è§„èŒƒä»£ç " class="article-share-link">åˆ†äº«</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/my-blog/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/my-blog/">&laquo; ä¸Šä¸€é¡µ</a><a class="page-number" href="/my-blog/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/TS/" rel="tag">TS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E5%88%B7%E9%A2%98/" rel="tag">åˆ·é¢˜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E5%91%A8%E5%88%8A/" rel="tag">å‘¨åˆŠ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" rel="tag">æ•ˆç‡å·¥å…·</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">æµè§ˆå™¨</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/my-blog/tags/TS/" style="font-size: 10px;">TS</a> <a href="/my-blog/tags/%E5%88%B7%E9%A2%98/" style="font-size: 10px;">åˆ·é¢˜</a> <a href="/my-blog/tags/%E5%91%A8%E5%88%8A/" style="font-size: 20px;">å‘¨åˆŠ</a> <a href="/my-blog/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 10px;">å·¥ç¨‹åŒ–</a> <a href="/my-blog/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">æ•ˆç‡å·¥å…·</a> <a href="/my-blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 15px;">æµè§ˆå™¨</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/03/">ä¸‰æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/02/">äºŒæœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/01/">ä¸€æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2021/12/">åäºŒæœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2020/09/">ä¹æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2020/08/">å…«æœˆ 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/my-blog/2022/03/19/weekly/08/">æ˜è¿œå‘¨åˆŠï¼šå­—ç¬¦åœ¨è®¡ç®—æœºçš„å­˜å‚¨å½¢å¼</a>
          </li>
        
          <li>
            <a href="/my-blog/2022/03/01/operating-system/float/">æµ®ç‚¹æ•°ä¸äºŒè¿›åˆ¶</a>
          </li>
        
          <li>
            <a href="/my-blog/2022/03/01/weekly/07/">æ˜è¿œå‘¨åˆŠï¼šä»é›¶å®ç°æ …æ ¼åœ°å›¾</a>
          </li>
        
          <li>
            <a href="/my-blog/2022/02/11/browser/extension/">å†™ä¸ªæµè§ˆå™¨æ’ä»¶å§</a>
          </li>
        
          <li>
            <a href="/my-blog/2022/01/23/weekly/06/">æ˜è¿œå‘¨åˆŠï¼šcssåŠ¨ç”»ã€svgåŠ¨ç”»å®ç°çº¿æ¡ loading</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 MingYuan<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/my-blog/" class="mobile-nav-link">Home</a>
  
    <a href="/my-blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/my-blog/js/jquery-3.4.1.min.js"></script>



  
<script src="/my-blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/my-blog/js/script.js"></script>





  </div>
</body>
</html>