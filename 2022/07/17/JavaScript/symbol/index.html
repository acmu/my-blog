<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>JavaScript Symbol è§£è¯» | MingYuan&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="ä½œä¸ºä¸€åé«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä½ ä¸€å®šè§è¿‡ç±»ä¼¼è¿™ä¸ªçš„ä¸œè¥¿Symbol.toPrimitiveã€@@toPrimitiveï¼Œä»–å…¶å®å°±æ˜¯æœ¬æ–‡è¦è®²çš„ Symbolï¼Œè®©æˆ‘ä»¬ä¸€èµ·äº†è§£ä¸‹å§ å®šä¹‰Symbol æ˜¯ä¸€ä¸ªå†…ç½®å¯¹è±¡ï¼Œæ„é€ å‡½æ•°ï¼ˆè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºä»–ä¸èƒ½ä½¿ç”¨ newï¼Œåªèƒ½ç›´æ¥è°ƒç”¨ï¼‰è¿”å› Symbol åŸå§‹ç±»å‹ï¼Œç”¨äºè¿”å›ä¸€ä¸ªå”¯ä¸€å€¼ï¼ˆè¿™ä¸ªå”¯ä¸€å€¼æ˜¯ä»€ä¹ˆå¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ä»–å’Œæ‰€æœ‰çš„å…¶ä»–å€¼éƒ½ä¸ç›¸ç­‰ï¼‰ï¼Œå¦‚ï¼š 1co">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScript Symbol è§£è¯»">
<meta property="og:url" content="https://acmu.github.io/2022/07/17/JavaScript/symbol/index.html">
<meta property="og:site_name" content="MingYuan&#39;s Blog">
<meta property="og:description" content="ä½œä¸ºä¸€åé«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä½ ä¸€å®šè§è¿‡ç±»ä¼¼è¿™ä¸ªçš„ä¸œè¥¿Symbol.toPrimitiveã€@@toPrimitiveï¼Œä»–å…¶å®å°±æ˜¯æœ¬æ–‡è¦è®²çš„ Symbolï¼Œè®©æˆ‘ä»¬ä¸€èµ·äº†è§£ä¸‹å§ å®šä¹‰Symbol æ˜¯ä¸€ä¸ªå†…ç½®å¯¹è±¡ï¼Œæ„é€ å‡½æ•°ï¼ˆè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºä»–ä¸èƒ½ä½¿ç”¨ newï¼Œåªèƒ½ç›´æ¥è°ƒç”¨ï¼‰è¿”å› Symbol åŸå§‹ç±»å‹ï¼Œç”¨äºè¿”å›ä¸€ä¸ªå”¯ä¸€å€¼ï¼ˆè¿™ä¸ªå”¯ä¸€å€¼æ˜¯ä»€ä¹ˆå¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ä»–å’Œæ‰€æœ‰çš„å…¶ä»–å€¼éƒ½ä¸ç›¸ç­‰ï¼‰ï¼Œå¦‚ï¼š 1co">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-07-17T15:32:36.000Z">
<meta property="article:modified_time" content="2022-11-11T04:38:41.656Z">
<meta property="article:author" content="MingYuan">
<meta property="article:tag" content="JavaScript">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/my-blog/atom.xml" title="MingYuan's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/my-blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/my-blog/css/style.css">

  
    
<link rel="stylesheet" href="/my-blog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.0.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/my-blog/" id="logo">MingYuan&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/my-blog/" id="subtitle">æ˜è¿œåšå®¢</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/my-blog/">Home</a>
        
          <a class="main-nav-link" href="/my-blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/my-blog/atom.xml" title="RSS è®¢é˜…"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœç´¢"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="æœç´¢"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://acmu.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-JavaScript/symbol" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/my-blog/2022/07/17/JavaScript/symbol/" class="article-date">
  <time class="dt-published" datetime="2022-07-17T15:32:36.000Z" itemprop="datePublished">2022-07-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      JavaScript Symbol è§£è¯»
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>ä½œä¸ºä¸€åé«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆï¼Œä½ ä¸€å®šè§è¿‡ç±»ä¼¼è¿™ä¸ªçš„ä¸œè¥¿<code>Symbol.toPrimitive</code>ã€<code>@@toPrimitive</code>ï¼Œä»–å…¶å®å°±æ˜¯æœ¬æ–‡è¦è®²çš„ Symbolï¼Œè®©æˆ‘ä»¬ä¸€èµ·äº†è§£ä¸‹å§</p>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>Symbol æ˜¯ä¸€ä¸ªå†…ç½®å¯¹è±¡ï¼Œæ„é€ å‡½æ•°ï¼ˆè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œå› ä¸ºä»–ä¸èƒ½ä½¿ç”¨ newï¼Œåªèƒ½ç›´æ¥è°ƒç”¨ï¼‰è¿”å› Symbol åŸå§‹ç±»å‹ï¼Œç”¨äºè¿”å›ä¸€ä¸ªå”¯ä¸€å€¼ï¼ˆè¿™ä¸ªå”¯ä¸€å€¼æ˜¯ä»€ä¹ˆå¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯ä»–å’Œæ‰€æœ‰çš„å…¶ä»–å€¼éƒ½ä¸ç›¸ç­‰ï¼‰ï¼Œå¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="built_in">Symbol</span>(<span class="string">&#x27;desc&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>å°±åªæœ‰ a èƒ½è®¿é—®åˆ° <code>Symbol(&#39;desc&#39;)</code>çš„å€¼ï¼Œå°±ç®—ä½ å†å®šä¹‰ä¸€ä¸ªç›¸åŒçš„å€¼ï¼Œä»–ä»¬ä¹Ÿæ˜¯ä¸ç›¸åŒçš„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> b = <span class="built_in">Symbol</span>(<span class="string">&#x27;desc&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(b === a);</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥å‘ç° â€˜descâ€™ æ ¹æœ¬å°±æ²¡å•¥å®é™…ç”¨å¤„ï¼Œç¡®å®æ˜¯è¿™æ ·ï¼Œä»–åœ¨è¿™é‡Œåªæ˜¯èµ·åˆ°äº†æ³¨é‡Šçš„ä½œç”¨</p>
<p>Symbol çš„ä¸€å¤§ç”¨å¤„å°±æ˜¯ä½œä¸ºå¯¹è±¡çš„ keyï¼ˆå¯¹è±¡çš„ key åªèƒ½æ˜¯ Symbol æˆ–å­—ç¬¦ä¸²è¿™ä¸¤ç§ç±»å‹ï¼‰ï¼Œå®ƒå¯ä»¥é¿å…å’Œå·²æœ‰çš„ key æˆ–æ–°å¢çš„ key å†²çªã€‚Symbol ä¸Šè¿˜æœ‰ä¸€äº›é™æ€å±æ€§ï¼Œä»–ä»¬è¢«ç§°ä¸ºä¼—æ‰€å‘¨çŸ¥çš„ï¼ˆwell-knownï¼‰Symbolï¼Œç”¨äºåœ¨ä¸€äº›ç‰¹æ®Šæ“ä½œæ—¶åº•å±‚çš„è°ƒç”¨</p>
<p>ä½ å¦‚æœæƒ³å®šä¹‰ä¸€ä¸ªæƒ³è®©å…¶ä»–å˜é‡ä¹Ÿèƒ½è·å–çš„ Symbolï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè¦é€šè¿‡ <code>Symbol.for(&quot;key&quot;)</code> é™æ€æ–¹æ³•ï¼Œä»–ä¼šå…ˆåœ¨ Symbol å…¨å±€æ³¨å†Œè¡¨ä¸Šæ³¨å†Œä¸€ä¸ª keyï¼Œç„¶åè¿”å›ï¼Œä¸‹æ¬¡ä½ åœ¨è°ƒç”¨çš„æ—¶å€™å°±ç›´æ¥è¿”å›å·²æœ‰å€¼äº†</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å…¨å±€æ³¨å†Œè¡¨ä¸­æ³¨å†Œ zmy è¿™ä¸ª key</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;zmy&#x27;</span>);</span><br><span class="line"><span class="comment">// åœ¨å…¨å±€æ³¨å†Œè¡¨ä¸­è·å– zmy key çš„å€¼</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="built_in">Symbol</span>.for(<span class="string">&#x27;zmy&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a === b);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="comment">// è¿˜å¯ä»¥æœ‰ keyFor æˆ– description è·å–å¯¹åº”çš„æè¿°</span></span><br><span class="line"><span class="built_in">console</span>.log(a.description, <span class="built_in">Symbol</span>.keyFor(a));</span><br><span class="line"><span class="comment">// zmy zmy</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸ºä»€ä¹ˆ-Symbol-ä¸èƒ½ç”¨-new-åˆ›å»ºï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-Symbol-ä¸èƒ½ç”¨-new-åˆ›å»ºï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ Symbol ä¸èƒ½ç”¨ new åˆ›å»ºï¼Ÿ"></a>ä¸ºä»€ä¹ˆ Symbol ä¸èƒ½ç”¨ new åˆ›å»ºï¼Ÿ</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨ String ç±»æ¯”ä¸¾ä¾‹ä¸€ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="built_in">String</span>(<span class="number">97</span>));</span><br><span class="line"><span class="comment">// string</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">String</span>(<span class="number">97</span>));</span><br><span class="line"><span class="comment">// object</span></span><br></pre></td></tr></table></figure>

<p>String æ„é€ å‡½æ•°ç›´æ¥è°ƒç”¨æ˜¯ä¸ºäº†å¼ºåˆ¶è½¬æ¢çš„ï¼Œnew String æ˜¯ä¸ºäº†è·å¾— string å¯¹è±¡çš„ï¼Œé¦–å…ˆä½ è‚¯å®šä¸æƒ³è·å¾— Symbol å¯¹è±¡ï¼Œä½ è¦çš„æ˜¯ Symbol åŸå§‹ç±»å‹ï¼Œæ‰€ä»¥è¯­è¨€å±‚é¢ä¸Š new Symbol ä¼šæŠ¥é”™ï¼Œè¿™æ˜¯åˆç†çš„ï¼Œå› ä¸ºæˆ‘ä»¬å°±ç®—æœ‰äº† Symbol å¯¹è±¡ä¹Ÿæ²¡æœ‰ç”¨æ­¦ä¹‹åœ°ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨<code>Object(Symbol(&#39;f&#39;))</code>å¼ºåˆ¶è·å–åˆ°å¯¹è±¡å°è£…çš„ Symbol</p>
<h2 id="well-known-Symbol"><a href="#well-known-Symbol" class="headerlink" title="well-known Symbol"></a>well-known Symbol</h2><p>æŠŠå®ƒç¿»è¯‘æˆä¼—æ‰€å‘¨çŸ¥çš„ Symbol æˆ‘è¿˜æ˜¯è§‰å¾—ä¸å¤ªåˆé€‚ï¼Œå› ä¸ºä¸€èˆ¬å¼€å‘è€…éƒ½ä¸ä¼šäº†è§£è¿™äº› Symbolï¼Œæ‰€ä»¥å°±ç”¨è‹±æ–‡åŸæ–‡å§ã€‚åœ¨ well-known Symbol ä¹‹å‰ï¼Œéƒ½æ˜¯ç”¨å­—ç¬¦ä¸²æ¥å®ç°è°ƒç”¨çš„ï¼Œå¦‚ <code>JSON.stringify</code> å‡½æ•°ä¼šè°ƒç”¨å¯¹è±¡çš„ <code>toJSON()</code>æ–¹æ³•ï¼ŒString å¼ºåˆ¶è½¬æ¢ä¼šè°ƒç”¨ <code>toString()</code> æ–¹æ³•ç­‰ã€‚å¯æ˜¯éšç€æ“ä½œç¬¦çš„é€æ¸å¢åŠ ï¼Œè¿™æ ·ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ä¸²æ–¹æ³•å¹¶ä¸å¥½ï¼Œæ‰€ä»¥å‡ºç°äº†å¸¸ç”¨ Symbol æ¥è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p><a target="_blank" rel="noopener" href="https://tc39.es/ecma262/multipage/ecmascript-data-types-and-values.html#sec-well-known-symbols">ES æ ‡å‡†</a> ä¸€å…±å®šä¹‰äº† 13 ä¸ªï¼ˆæ ‡å‡†ä¸­ä¹Ÿå®šä¹‰äº† @@toPrimitive å…¶å®å°±æ˜¯ Symbol.toPrimitiveï¼Œåªä¸è¿‡ @@toPrimitive æ˜¯åœ¨æ ‡å‡†ä¸­æè¿°çš„æ–¹å¼ï¼ŒSymbol.toPrimitive æ˜¯èƒ½åœ¨è¯­è¨€ä¸­å®é™…ç”¨åˆ°çš„åŠŸèƒ½ï¼‰ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹äº›å¸¸ç”¨çš„</p>
<h3 id="Symbol-toPrimitive"><a href="#Symbol-toPrimitive" class="headerlink" title="Symbol.toPrimitive"></a>Symbol.toPrimitive</h3><p>å¦‚æœä½ æƒ³è¦æŠŠä¸€ä¸ªå¯¹è±¡ç±»å‹è½¬ä¸ºåŸå§‹ç±»å‹ï¼Œé‚£å°±è¦ä½¿ç”¨åˆ° Symbol.toPrimitive è¿™ä¸ª keyï¼Œå¦‚ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line"><span class="comment">// å¦‚æœæ²¡æœ‰å®šä¹‰ Symbol.toPrimitive è¿™ä¸ª keyï¼Œé‚£ä¹ˆèµ°çš„æ˜¯é»˜è®¤è¡Œä¸º</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>(obj));</span><br><span class="line"><span class="comment">// [object Object]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœç»™å¯¹è±¡å®šä¹‰äº† Symbol.toPrimitive keyï¼Œä»–çš„å±æ€§å€¼æ˜¯æ–¹æ³•</span></span><br><span class="line"><span class="comment">// é‚£ä¹ˆåœ¨æŠŠå¯¹è±¡è½¬ä¸ºåŸå§‹ç±»å‹çš„æ—¶å€™å°±ä¼šä½¿ç”¨è¿™ä¸ªæ–¹æ³•</span></span><br><span class="line">obj[<span class="built_in">Symbol</span>.toPrimitive] = <span class="function"><span class="keyword">function</span> (<span class="params">hint</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// hint çš„å–å€¼æœ‰3ç§ï¼šstringã€numberå’Œdefault</span></span><br><span class="line">    <span class="keyword">if</span> (hint === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;mq&#x27;</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hint === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">97</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>(obj));</span><br><span class="line"><span class="comment">// mq</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(obj));</span><br><span class="line"><span class="comment">// 97</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œç”±äºå†å²åŸå› ï¼Œä½ è‚¯å®šä¹Ÿå¬è¯´è¿‡ç”¨ toString æˆ– valueOf ä¹Ÿèƒ½å®ç°ä»¥ä¸Šé€»è¾‘ï¼Œæ˜¯çš„ï¼Œä½†ç°ä»£è¯­æ³•è¿˜æ˜¯æ¨èé¦–å…ˆä½¿ç”¨ Symbol.toPrimitive æ¥è§£å†³ï¼Œä¾‹å­å¦‚ä¸‹ï¼š</p>
<p><strong>å¯¹è±¡è½¬ string</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">    <span class="comment">// 1. é¦–å…ˆä½¿ç”¨å®ƒ</span></span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;symbol nb&#x27;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 2. å¦‚æœæ²¡æœ‰ @@toPrimitive é‚£ä¹ˆä½¿ç”¨è¿™ä¸ª</span></span><br><span class="line">    <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;str&#x27;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ä¸ç”¨è¿™ä¸ª</span></span><br><span class="line">    <span class="function"><span class="title">valueOf</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;value of&#x27;</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span>(a));</span><br></pre></td></tr></table></figure>

<p><strong>å¯¹è±¡è½¬ number</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123;</span><br><span class="line">    <span class="comment">// 1. é¦–å…ˆä½¿ç”¨å®ƒ</span></span><br><span class="line">    [<span class="built_in">Symbol</span>.toPrimitive]() &#123;</span><br><span class="line">        <span class="comment">// ä¸€å®šè¦è¿”å›æ•°å­—ç±»å‹ï¼Œå¦åˆ™æ˜¯ NaN</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">789</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 2. æ¥ç€æ˜¯è¿™ä¸ª</span></span><br><span class="line">    <span class="function"><span class="title">valueOf</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">123</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 3. æœ€åè¿™ä¸ª</span></span><br><span class="line">    <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">567</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Number</span>(a));</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥è¿™ä½ ä¹Ÿåº”è¯¥èƒ½ç†è§£ä¸ºä»€ä¹ˆ<code>+moment()</code>çš„å€¼å’Œ <code>moment().valueOf()</code>çš„å€¼ä¸€æ ·äº†å§</p>
<h3 id="Symbol-toStringTag"><a href="#Symbol-toStringTag" class="headerlink" title="Symbol.toStringTag"></a>Symbol.toStringTag</h3><p>ç”±äº JavaScript ç±»å‹ç³»ç»Ÿçš„æ··ä¹±ï¼Œä½ ä¸€å®šç”¨è¿‡<code>Object.prototype.toString</code>æ¥åˆ¤æ–­ç±»å‹ï¼Œé‚£ä¹ˆ Symbol.toStringTag å°±å’Œè¿™ä¸ªå‡½æ•°æœ‰å…³</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ toString å‡½æ•°å¯ä»¥åˆ¤æ–­å‡ºæ•°ç»„ç±»å‹</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call([]));</span><br><span class="line"><span class="comment">// [object Array]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é‚£ä¹ˆå¦‚æœä½ è‡ªå·±å®šä¹‰äº†ä¸€ä¸ªæ ¡éªŒç±»ï¼Œæƒ³è®©ä»–åœ¨ toString æ—¶èƒ½è¿”å›ç‰¹å®šç±»å‹è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ValidatorClass</span> </span>&#123;&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> ValidatorClass()));</span><br><span class="line"><span class="comment">// [object Object]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä»–çš„ Symbol.toStringTag å±æ€§å¯ä»¥æ”¹å˜è¿™ä¸ªè¡Œä¸º</span></span><br><span class="line"><span class="comment">// æ­¤å±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">ValidatorClass.prototype[<span class="built_in">Symbol</span>.toStringTag] = <span class="string">&#x27;Validator&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> ValidatorClass()));</span><br><span class="line"><span class="comment">// [object Validator]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é¡ºä¾¿ä¸€æ dom ä¸Šæœ‰è¿™ä¸ªå±æ€§</span></span><br><span class="line"><span class="keyword">const</span> btn = <span class="built_in">document</span>.createElement(<span class="string">&#x27;button&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(btn));</span><br><span class="line"><span class="comment">// [object HTMLButtonElement]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥çœ‹åˆ° btn çš„åŸå‹ä¸Šæ˜¯æœ‰ Symbol(Symbol.toStringTag) è¿™ä¸ª key çš„</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(<span class="built_in">Object</span>.getPrototypeOf(btn)));</span><br><span class="line"><span class="comment">// [Symbol(Symbol.toStringTag)]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(btn[<span class="built_in">Symbol</span>.toStringTag]);</span><br><span class="line"><span class="comment">// HTMLButtonElement</span></span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols"><code>Object.getOwnPropertySymbols()</code></a> apiï¼Œä»–å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡çš„æ‰€æœ‰ç±»å‹ä¸º Symbol çš„ keyã€‚æ‰€æœ‰å¯¹è±¡åˆå§‹æ—¶éƒ½æ˜¯æ²¡æœ‰ Symbol å±æ€§çš„ï¼ˆä½†æ˜¯ä½ å¯ä»¥å»åŸå‹ä¸Šæ‰¾ Symbolï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols([]));</span><br><span class="line"><span class="comment">// []</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(&#123;&#125;));</span><br><span class="line"><span class="comment">// []</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(<span class="built_in">Object</span>.getPrototypeOf([])));</span><br><span class="line"><span class="comment">// [Symbol(Symbol.iterator), Symbol(Symbol.unscopables)]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(<span class="built_in">Object</span>.getPrototypeOf(<span class="string">&#x27;zmy&#x27;</span>)));</span><br><span class="line"><span class="comment">// [Symbol(Symbol.iterator)]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertySymbols(<span class="built_in">Object</span>.getPrototypeOf(<span class="function">() =&gt;</span> &#123;&#125;)));</span><br><span class="line"><span class="comment">// [Symbol(Symbol.hasInstance)]</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œæœ‰äº†è¿™ä¸ªå±æ€§ä¹‹åä½ å¯ä»¥å¹²äº›åäº‹äº† ğŸ¤«</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="regexp">/1/</span>));</span><br><span class="line"><span class="comment">// [object RegExp]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call([]));</span><br><span class="line"><span class="comment">// [object Array]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype[<span class="built_in">Symbol</span>.toStringTag] = <span class="string">&#x27;RegExp&#x27;</span>;</span><br><span class="line"><span class="comment">// è¿™é‡Œè™½ç„¶å‚æ•°æ˜¯æ•°ç»„ï¼Œä½†ç”±äºä½ æ”¹äº† toStringTagï¼Œæ‰€ä»¥â€œå˜æˆâ€äº†æ­£åˆ™ç±»å‹</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call([]));</span><br><span class="line"><span class="comment">// [object RegExp]</span></span><br></pre></td></tr></table></figure>

<h3 id="Symbol-hasInstance"><a href="#Symbol-hasInstance" class="headerlink" title="Symbol.hasInstance"></a>Symbol.hasInstance</h3><p>å®ƒå¯ä»¥å®šä¹‰<code>instanceof</code>æ“ä½œç¬¦çš„è¡Œä¸ºï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ <code>instanceof</code>æ“ä½œç¬¦å‰çš„å˜é‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å› ä¸º instanceof æ“ä½œç¬¦åé¢è·Ÿç€æ˜¯æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥è¦å®šä¹‰æˆé™æ€å±æ€§</span></span><br><span class="line"><span class="comment">// ä¹Ÿå°±æ˜¯è¦å®šä¹‰åœ¨æ„é€ å‡½æ•° MyArray[Symbol.hasInstance] ä¸Š</span></span><br><span class="line"><span class="comment">// è€Œä¸æ˜¯åŸå‹ MyArray.prototype[Symbol.hasInstance] ä¸Š</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> [<span class="built_in">Symbol</span>.hasInstance](instance) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(instance);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> MyArray);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;&#125; <span class="keyword">instanceof</span> MyArray);</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ç›´æ¥è°ƒç”¨å®ƒæ¥å®ç° <code>instanceof</code> æ“ä½œç¬¦çš„è¡Œä¸º</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> cat = <span class="keyword">new</span> Animal();</span><br><span class="line"><span class="built_in">console</span>.log(Animal[<span class="built_in">Symbol</span>.hasInstance](cat));</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ä½ ä¸ç”¨è®¤ä¸ºé‚£äº›å…³é”®å­—æ˜¯å•¥å¾ˆå‰å®³çš„ä¸œè¥¿ï¼Œå°±åƒè¿™é‡Œåªæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨è€Œå·²</p>
<h3 id="Symbol-species"><a href="#Symbol-species" class="headerlink" title="Symbol.species"></a>Symbol.species</h3><p>è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰è¶£çš„å±æ€§ï¼Œä½ å¦‚æœå®šä¹‰äº†ä¸€ä¸ªè‡ªå®šä¹‰æ•°ç»„ç±»ï¼Œé‚£ä¹ˆä»–ä½¿ç”¨ filter ç­‰æ–¹æ³•è™½è¯´è¿”å›çš„æ˜¯æ–°å¯¹è±¡ï¼Œä½†ç±»å‹æ˜¯ä¸å˜çš„ï¼Œå¦‚æœä½ æƒ³è¦æ”¹å˜ç±»å‹ï¼Œå°±å¾—ä½¿ç”¨ Symbol.species</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a1 = <span class="keyword">new</span> MyArray(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">const</span> a2 = a1.filter(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(a1 <span class="keyword">instanceof</span> MyArray);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(a2 <span class="keyword">instanceof</span> MyArray);</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>å°±åƒè¿™é‡Œï¼Œa2 è™½ç„¶æ˜¯ filter å‡ºæ¥çš„æ–°å¯¹è±¡ï¼Œä½†ä»–ä»ç„¶æ˜¯ MyArray çš„å®ä¾‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyArray</span> <span class="keyword">extends</span> <span class="title">Array</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> get [<span class="built_in">Symbol</span>.species]() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> a1 = <span class="keyword">new</span> MyArray(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"><span class="keyword">const</span> a2 = a1.filter(<span class="function"><span class="params">x</span> =&gt;</span> x % <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a2 <span class="keyword">instanceof</span> MyArray);</span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(a2 <span class="keyword">instanceof</span> <span class="built_in">Array</span>);</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæŠŠ Symbol.species å±æ€§è®¾ç½®æˆ Array çš„è¯ï¼Œé‚£ä¹ˆå³ä½¿ a1 æ˜¯ MyArray çš„å®ä¾‹ï¼Œé‚£ä¹ˆä»– filter å‡ºæ¥çš„ a2 ä¹Ÿä¸æ˜¯ MyArray çš„å®ä¾‹ï¼Œè€Œæ˜¯ Symbol.species å±æ€§å€¼çš„å®ä¾‹</p>
<h3 id="Symbol-iterator"><a href="#Symbol-iterator" class="headerlink" title="Symbol.iterator"></a>Symbol.iterator</h3><p>å¦‚æœæƒ³è®©ä½ çš„å¯¹è±¡èƒ½è¢« for of éå†ï¼Œé‚£ä¹ˆå°±å¾—ä½¿ç”¨ Symbol.iterator å±æ€§ï¼Œä»–æ˜¯ä¸€ä¸ª Generator å‡½æ•°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²å’Œæ•°ç»„ä¸Šéƒ½æœ‰ Symbol.iterator å±æ€§ï¼Œæ‰€ä»¥ä»–ä»¬èƒ½è¢« for of éå†</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertySymbols(<span class="built_in">Object</span>.getPrototypeOf([]));</span><br><span class="line"><span class="comment">// [Symbol(Symbol.iterator), Symbol(Symbol.unscopables)]</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertySymbols(<span class="built_in">Object</span>.getPrototypeOf(<span class="string">&#x27;str&#x27;</span>));</span><br><span class="line"><span class="comment">// [Symbol(Symbol.iterator)]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iterable = &#123;&#125;;</span><br><span class="line">iterable[<span class="built_in">Symbol</span>.iterator] = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;zmy&#x27;</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;learn&#x27;</span>;</span><br><span class="line">    <span class="keyword">yield</span> <span class="string">&#x27;symbol&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// zmy</span></span><br><span class="line"><span class="comment">// learn</span></span><br><span class="line"><span class="comment">// symbol</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿˜å¯ä»¥ä½¿ç”¨ spread è¿ç®—ç¬¦</span></span><br><span class="line"><span class="keyword">const</span> list = [...iterable];</span><br><span class="line"><span class="built_in">console</span>.log(list);</span><br><span class="line"><span class="comment">// [&#x27;zmy&#x27;, &#x27;learn&#x27;, &#x27;symbol&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>å­—ç¬¦ä¸²ä¸æ•°ç»„è‡ªå¸¦ Symbol.iterator å±æ€§ï¼Œå¯ä»¥è°ƒç”¨ç”Ÿæˆè¿­ä»£å™¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> s = <span class="string">&#x27;zmy&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> g = s[<span class="built_in">Symbol</span>.iterator]();</span><br><span class="line"><span class="built_in">console</span>.log(g.next());</span><br><span class="line"><span class="built_in">console</span>.log(g.next());</span><br><span class="line"><span class="built_in">console</span>.log(g.next());</span><br><span class="line"><span class="built_in">console</span>.log(g.next());</span><br><span class="line"><span class="comment">// &#123;value: &#x27;z&#x27;, done: false&#125;</span></span><br><span class="line"><span class="comment">// &#123;value: &#x27;m&#x27;, done: false&#125;</span></span><br><span class="line"><span class="comment">// &#123;value: &#x27;y&#x27;, done: false&#125;</span></span><br><span class="line"><span class="comment">// &#123;value: undefined, done: true&#125;</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶å¦‚æœ next å‡½æ•°è¿”å› Promise æ€ä¹ˆåŠå‘¢ï¼Ÿå°±éœ€è¦ä½¿ç”¨ asyncIterator å’Œ for await of äº†</p>
<p>å¯¹äºè¿­ä»£å™¨ä¸ç”Ÿæˆå™¨æ¨èçœ‹è¿™ç¯‡äº†è§£ä¸€ä¸‹ï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903735534026765">ES9 ä¸­çš„å¼‚æ­¥è¿­ä»£å™¨ï¼ˆAsync iteratorï¼‰å’Œå¼‚æ­¥ç”Ÿæˆå™¨ï¼ˆAsync generatorï¼‰</a></p>
<h3 id="Symbol-asyncIterator"><a href="#Symbol-asyncIterator" class="headerlink" title="Symbol.asyncIterator"></a>Symbol.asyncIterator</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span>* <span class="title">asyncGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> asyncIterator = asyncGenerator();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> asyncIterator[<span class="built_in">Symbol</span>.asyncIterator]);</span><br><span class="line"><span class="comment">// &#x27;function&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">run</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> value <span class="keyword">of</span> asyncIterator) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">run();</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// for...await...ofå¯ä»¥éå†å…·æœ‰Symbol.asyncIteratoræ–¹æ³•çš„æ•°æ®ç»“æ„</span></span><br><span class="line"><span class="comment">// å¹¶ä¸”ä¼šç­‰å¾…ä¸Šä¸€ä¸ªæˆå‘˜çŠ¶æ€æ”¹å˜åå†ç»§ç»­æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure>

<h3 id="Symbol-unscopables"><a href="#Symbol-unscopables" class="headerlink" title="Symbol.unscopables"></a>Symbol.unscopables</h3><p>å€¼æ˜¯å¯¹è±¡ï¼Œå±æ€§ååŠ å¸ƒå°”å€¼ï¼Œç”¨ with çš„æ—¶å€™ï¼Œå¦‚æœä¸º tureï¼Œå°±ä¸èƒ½å–å€¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> object1 = &#123;</span><br><span class="line">    <span class="attr">property1</span>: <span class="number">42</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">object1[<span class="built_in">Symbol</span>.unscopables] = &#123;</span><br><span class="line">    <span class="attr">property1</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> (object1) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(property1);</span><br><span class="line">    <span class="comment">// expected output: Error: property1 is not defined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Symbol-isConcatSpreadable"><a href="#Symbol-isConcatSpreadable" class="headerlink" title="Symbol.isConcatSpreadable"></a>Symbol.isConcatSpreadable</h3><p>å†…éƒ¨ @@isConcatSpreadable å±æ€§ï¼Œæ˜¯å¸ƒå°”å€¼ï¼Œä»£è¡¨ Array.prototype.concat() è°ƒç”¨æ—¶æ˜¯å¦æ‹å¹³æ•°ç»„</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> alpha = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> numeric = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> alphaNumeric = alpha.concat(numeric);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(alphaNumeric);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, 1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">numeric[<span class="built_in">Symbol</span>.isConcatSpreadable] = <span class="literal">false</span>;</span><br><span class="line">alphaNumeric = alpha.concat(numeric);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(alphaNumeric);</span><br><span class="line"><span class="comment">// expected output: Array [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, Array [1, 2, 3]]</span></span><br></pre></td></tr></table></figure>

<h3 id="Symbol-match-ç­‰-string-ç›¸å…³-Symbol"><a href="#Symbol-match-ç­‰-string-ç›¸å…³-Symbol" class="headerlink" title="Symbol.match ç­‰ string ç›¸å…³ Symbol"></a>Symbol.match ç­‰ string ç›¸å…³ Symbol</h3><p>Symbol.matchã€Symbol.matchAllã€Symbol.replaceã€Symbol.searchã€Symbol.splitï¼Œå’Œä¸Šæ–‡ç±»ä¼¼ï¼Œéƒ½æ˜¯åœ¨å¯¹åº” String.prototype çš„å‡½æ•°ä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œæœ‰éœ€è¦å†æŸ¥é˜…å³å¯</p>
<h2 id="å®ç°ç§æœ‰å±æ€§"><a href="#å®ç°ç§æœ‰å±æ€§" class="headerlink" title="å®ç°ç§æœ‰å±æ€§"></a>å®ç°ç§æœ‰å±æ€§</h2><p>Symbol çš„å¦ä¸€ä¸ªä½œç”¨å®ç°ç§æœ‰å±æ€§ï¼Œå¯å‚è€ƒ<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/SusZu6rdVijZ-6seg9oa0Q">ç§æœ‰å±æ€§çš„ 6 ç§å®ç°æ–¹å¼ï¼Œä½ ç”¨è¿‡å‡ ç§ï¼Ÿ</a></p>
<p>å‚è€ƒï¼š</p>
<ol>
<li>mdn symbolï¼š<a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://acmu.github.io/2022/07/17/JavaScript/symbol/" data-id="clac0ez32000ueqopgdxaghuy" data-title="JavaScript Symbol è§£è¯»" class="article-share-link">åˆ†äº«</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/my-blog/tags/JavaScript/" rel="tag">JavaScript</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/my-blog/2022/07/17/JavaScript/js-regexp/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">å‰ä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          JavaScript æ­£åˆ™ç†è§£
        
      </div>
    </a>
  
  
    <a href="/my-blog/2022/07/10/JavaScript/defineProperty/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">åä¸€ç¯‡</strong>
      <div class="article-nav-title">defineProperty è¯¦ç»†è§£è¯»</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/JavaScript/" rel="tag">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/TS/" rel="tag">TS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E5%88%B7%E9%A2%98/" rel="tag">åˆ·é¢˜</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E5%91%A8%E5%88%8A/" rel="tag">å‘¨åˆŠ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">å·¥ç¨‹åŒ–</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" rel="tag">æ•ˆç‡å·¥å…·</a></li><li class="tag-list-item"><a class="tag-list-link" href="/my-blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" rel="tag">æµè§ˆå™¨</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æ ‡ç­¾äº‘</h3>
    <div class="widget tagcloud">
      <a href="/my-blog/tags/JavaScript/" style="font-size: 16.67px;">JavaScript</a> <a href="/my-blog/tags/TS/" style="font-size: 10px;">TS</a> <a href="/my-blog/tags/%E5%88%B7%E9%A2%98/" style="font-size: 10px;">åˆ·é¢˜</a> <a href="/my-blog/tags/%E5%91%A8%E5%88%8A/" style="font-size: 20px;">å‘¨åˆŠ</a> <a href="/my-blog/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 10px;">å·¥ç¨‹åŒ–</a> <a href="/my-blog/tags/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">æ•ˆç‡å·¥å…·</a> <a href="/my-blog/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/" style="font-size: 13.33px;">æµè§ˆå™¨</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">å½’æ¡£</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/11/">åä¸€æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/08/">å…«æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/07/">ä¸ƒæœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/03/">ä¸‰æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/02/">äºŒæœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2022/01/">ä¸€æœˆ 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2021/12/">åäºŒæœˆ 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2020/09/">ä¹æœˆ 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/my-blog/archives/2020/08/">å…«æœˆ 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/my-blog/2022/11/10/weekly/10/">æ˜è¿œè§†è§’ï¼šå‰ç«¯è„šæ‰‹æ¶å¼€å‘å…¥é—¨</a>
          </li>
        
          <li>
            <a href="/my-blog/2022/11/09/JavaScript/%E4%BD%BF%E7%94%A8%20npm%20link%20%E8%B0%83%E8%AF%95%E5%8C%85/">ä½¿ç”¨ npm link è°ƒè¯•åŒ…</a>
          </li>
        
          <li>
            <a href="/my-blog/2022/11/05/JavaScript/JavaScript%20%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%BB%A7%E6%89%BF/">JavaScript çš„å¯¹è±¡ä¸ç»§æ‰¿</a>
          </li>
        
          <li>
            <a href="/my-blog/2022/11/04/JavaScript/%E5%8F%AF%E9%80%89%E9%93%BE%E6%93%8D%E4%BD%9C%E7%AC%A6/">å¯é€‰é“¾è¿ç®—ç¬¦</a>
          </li>
        
          <li>
            <a href="/my-blog/2022/08/03/JavaScript/JavaScript%20%E5%AF%B9%E8%B1%A1%E8%A7%A3%E8%AF%BB/">JavaScript å¯¹è±¡è§£è¯»</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 MingYuan<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/my-blog/" class="mobile-nav-link">Home</a>
  
    <a href="/my-blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/my-blog/js/jquery-3.4.1.min.js"></script>



  
<script src="/my-blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/my-blog/js/script.js"></script>





  </div>
</body>
</html>